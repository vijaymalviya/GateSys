define(["exports","react","react-dom","mendix/filters/builders","big.js"],(function(e,t,n,r,i){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s=o(t);function a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var l={};function u(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:l}var c=Object.assign,h=Object.getOwnPropertyDescriptor,d=Object.defineProperty,f=Object.prototype,v=[];Object.freeze(v);var p={};Object.freeze(p);var _="undefined"!=typeof Proxy,g=Object.toString();function m(){_||a("Proxy not available")}function b(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var y=function(){};function w(e){return"function"==typeof e}function S(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function O(e){return null!==e&&"object"==typeof e}function E(e){if(!O(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===g}function x(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function A(e,t,n){d(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function T(e,t,n){d(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function P(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return O(e)&&!0===e[n]}}function C(e){return e instanceof Map}function k(e){return e instanceof Set}var I=void 0!==Object.getOwnPropertySymbols;var N="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:I?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function V(e){return null===e?null:"object"==typeof e?""+e:e}function M(e,t){return f.hasOwnProperty.call(e,t)}var j=Object.getOwnPropertyDescriptors||function(e){var t={};return N(e).forEach((function(n){t[n]=h(e,n)})),t};function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?o:String(o)),r)}var i,o}function R(e,t,n){return t&&D(e.prototype,t),n&&D(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(this,arguments)}function K(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,B(e,t)}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var z=Symbol("mobx-stored-annotations");function H(e){return Object.assign((function(t,n){if(W(n))return e.decorate_20223_(t,n);G(t,n,e)}),e)}function G(e,t,n){M(e,z)||A(e,z,L({},e[z])),function(e){return e.annotationType_===te}(n)||(e[z][t]=n)}function W(e){return"object"==typeof e&&"string"==typeof e.kind}var J=Symbol("mobx administration"),X=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Qe.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return Ot(this)},t.reportChanged=function(){wt(),Et(this),St()},t.toString=function(){return this.name_},e}(),Y=P("Atom",X);function $(e,t,n){void 0===t&&(t=y),void 0===n&&(n=y);var r,i=new X(e);return t!==y&&Wt(zt,i,t,r),n!==y&&Gt(i,n),i}var Z={identity:function(e,t){return e===t},structural:function(e,t){return cr(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return cr(e,t,1)}};function Q(e,t,n){return on(e)?e:Array.isArray(e)?Le.array(e,{name:n}):E(e)?Le.object(e,void 0,{name:n}):C(e)?Le.map(e,{name:n}):k(e)?Le.set(e,{name:n}):"function"!=typeof e||Bt(e)||rn(e)?e:x(e)?tn(e):Kt(n,e)}function ee(e){return e}var te="override";function ne(e,t){return{annotationType_:e,options_:t,make_:re,extend_:ie,decorate_20223_:oe}}function re(e,t,n,r){var i;if(null!=(i=this.options_)&&i.bound)return null===this.extend_(e,t,n,!1)?0:1;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(Bt(n.value))return 1;var o=se(e,this,t,n,!1);return d(r,t,o),2}function ie(e,t,n,r){var i=se(e,this,t,n);return e.defineProperty_(t,i,r)}function oe(e,t){var n=t.kind,r=t.name,i=t.addInitializer,o=this;if("field"!=n){var s,l,u,c,h,d;if("method"==n)return Bt(e)||(l=e,e=Je(null!=(u=null==(c=o.options_)?void 0:c.name)?u:r.toString(),l,null!=(h=null==(d=o.options_)?void 0:d.autoAction)&&h)),null!=(s=this.options_)&&s.bound&&i((function(){var e=this,t=e[r].bind(e);t.isMobxAction=!0,e[r]=t})),e;a("Cannot apply '"+o.annotationType_+"' to '"+String(r)+"' (kind: "+n+"):\n'"+o.annotationType_+"' can only be used on properties with a function value.")}else i((function(){G(this,r,o)}))}function se(e,t,n,r,i){var o,s,a,l,u,c,h,d;void 0===i&&(i=gt.safeDescriptors),d=r,t.annotationType_,d.value;var f,v=r.value;null!=(o=t.options_)&&o.bound&&(v=v.bind(null!=(f=e.proxy_)?f:e.target_));return{value:Je(null!=(s=null==(a=t.options_)?void 0:a.name)?s:n.toString(),v,null!=(l=null==(u=t.options_)?void 0:u.autoAction)&&l,null!=(c=t.options_)&&c.bound?null!=(h=e.proxy_)?h:e.target_:void 0),configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function ae(e,t){return{annotationType_:e,options_:t,make_:le,extend_:ue,decorate_20223_:ce}}function le(e,t,n,r){var i;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(i=this.options_)&&i.bound&&(!M(e.target_,t)||!rn(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(rn(n.value))return 1;var o=he(e,this,t,n,!1,!1);return d(r,t,o),2}function ue(e,t,n,r){var i,o=he(e,this,t,n,null==(i=this.options_)?void 0:i.bound);return e.defineProperty_(t,o,r)}function ce(e,t){var n,r=t.name,i=t.addInitializer;return rn(e)||(e=tn(e)),null!=(n=this.options_)&&n.bound&&i((function(){var e=this,t=e[r].bind(e);t.isMobXFlow=!0,e[r]=t})),e}function he(e,t,n,r,i,o){var s;void 0===o&&(o=gt.safeDescriptors),s=r,t.annotationType_,s.value;var a,l=r.value;(rn(l)||(l=tn(l)),i)&&((l=l.bind(null!=(a=e.proxy_)?a:e.target_)).isMobXFlow=!0);return{value:l,configurable:!o||e.isPlainObject_,enumerable:!1,writable:!o}}function de(e,t){return{annotationType_:e,options_:t,make_:fe,extend_:ve,decorate_20223_:pe}}function fe(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function ve(e,t,n,r){var i;return i=n,this.annotationType_,i.get,e.defineComputedProperty_(t,L({},this.options_,{get:n.get,set:n.set}),r)}function pe(e,t){var n=this,r=t.name;return(0,t.addInitializer)((function(){var t=qn(this)[J],i=L({},n.options_,{get:e,context:this});i.name||(i.name="ObservableObject."+r.toString()),t.values_.set(r,new tt(i))})),function(){return this[J].getObservablePropValue_(r)}}function _e(e,t){return{annotationType_:e,options_:t,make_:ge,extend_:me,decorate_20223_:be}}function ge(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function me(e,t,n,r){var i,o;return this.annotationType_,e.defineObservableProperty_(t,n.value,null!=(i=null==(o=this.options_)?void 0:o.enhancer)?i:Q,r)}function be(e,t){var n=this,r=t.kind,i=t.name,o=new WeakSet;function s(e,t){var r,s,a=qn(e)[J],l=new Ze(t,null!=(r=null==(s=n.options_)?void 0:s.enhancer)?r:Q,"ObservableObject."+i.toString(),!1);a.values_.set(i,l),o.add(e)}if("accessor"==r)return{get:function(){return o.has(this)||s(this,e.get.call(this)),this[J].getObservablePropValue_(i)},set:function(e){return o.has(this)||s(this,e),this[J].setObservablePropValue_(i,e)},init:function(e){return o.has(this)||s(this,e),e}}}var ye="true",we=Se();function Se(e){return{annotationType_:ye,options_:e,make_:Oe,extend_:Ee,decorate_20223_:xe}}function Oe(e,t,n,r){var i,o,s,a;if(n.get)return Fe.make_(e,t,n,r);if(n.set){var l=Je(t.toString(),n.set);return r===e.target_?null===e.defineProperty_(t,{configurable:!gt.safeDescriptors||e.isPlainObject_,set:l})?0:2:(d(r,t,{configurable:!0,set:l}),2)}if(r!==e.target_&&"function"==typeof n.value)return x(n.value)?(null!=(a=this.options_)&&a.autoBind?tn.bound:tn).make_(e,t,n,r):(null!=(s=this.options_)&&s.autoBind?Kt.bound:Kt).make_(e,t,n,r);var u,c=!1===(null==(i=this.options_)?void 0:i.deep)?Le.ref:Le;"function"==typeof n.value&&null!=(o=this.options_)&&o.autoBind&&(n.value=n.value.bind(null!=(u=e.proxy_)?u:e.target_));return c.make_(e,t,n,r)}function Ee(e,t,n,r){var i,o,s;if(n.get)return Fe.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:!gt.safeDescriptors||e.isPlainObject_,set:Je(t.toString(),n.set)},r);"function"==typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(s=e.proxy_)?s:e.target_));return(!1===(null==(o=this.options_)?void 0:o.deep)?Le.ref:Le).extend_(e,t,n,r)}function xe(e,t){a("'"+this.annotationType_+"' cannot be used as a decorator")}var Ae={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Te(e){return e||Ae}Object.freeze(Ae);var Pe=_e("observable"),Ce=_e("observable.ref",{enhancer:ee}),ke=_e("observable.shallow",{enhancer:function(e,t,n){return null==e||Gn(e)||Cn(e)||Dn(e)||Kn(e)?e:Array.isArray(e)?Le.array(e,{name:n,deep:!1}):E(e)?Le.object(e,void 0,{name:n,deep:!1}):C(e)?Le.map(e,{name:n,deep:!1}):k(e)?Le.set(e,{name:n,deep:!1}):void 0}}),Ie=_e("observable.struct",{enhancer:function(e,t){return cr(e,t)?t:e}}),Ne=H(Pe);function Ve(e){return!0===e.deep?Q:!1===e.deep?ee:(t=e.defaultDecorator)&&null!=(n=null==(r=t.options_)?void 0:r.enhancer)?n:Q;var t,n,r}function Me(e,t,n){return W(t)?Pe.decorate_20223_(e,t):S(t)?void G(e,t,Pe):on(e)?e:E(e)?Le.object(e,t,n):Array.isArray(e)?Le.array(e,t):C(e)?Le.map(e,t):k(e)?Le.set(e,t):"object"==typeof e&&null!==e?e:Le.box(e,t)}c(Me,Ne);var je,De,Re={box:function(e,t){var n=Te(t);return new Ze(e,Ve(n),n.name,!0,n.equals)},array:function(e,t){var n=Te(t);return(!1===gt.useProxies||!1===n.proxy?ir:yn)(e,Ve(n),n.name)},map:function(e,t){var n=Te(t);return new jn(e,Ve(n),n.name)},set:function(e,t){var n=Te(t);return new Ln(e,Ve(n),n.name)},object:function(e,t,n){return lr((function(){return function(e,t,n,r){var i=j(t);return lr((function(){var t=qn(e,r)[J];N(i).forEach((function(e){t.extend_(e,i[e],!n||(!(e in n)||n[e]))}))})),e}(!1===gt.useProxies||!1===(null==n?void 0:n.proxy)?qn({},n):function(e,t){var n,r;return m(),e=qn(e,t),null!=(r=(n=e[J]).proxy_)?r:n.proxy_=new Proxy(e,ln)}({},n),e,t)}))},ref:H(Ce),shallow:H(ke),deep:Ne,struct:H(Ie)},Le=c(Me,Re),Ke="computed",Be=de(Ke),Ue=de("computed.struct",{equals:Z.structural}),Fe=function(e,t){if(W(t))return Be.decorate_20223_(e,t);if(S(t))return G(e,t,Be);if(E(e))return H(de(Ke,e));var n=E(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new tt(n)};Object.assign(Fe,Be),Fe.struct=H(Ue);var qe,ze=0,He=1,Ge=null!=(je=null==(De=h((function(){}),"name"))?void 0:De.configurable)&&je,We={value:"action",configurable:!0,writable:!1,enumerable:!1};function Je(e,t,n,r){function i(){return function(e,t,n,r,i){var o=function(e,t){var n=!1,r=0,i=gt.trackingDerivation,o=!t||!i;wt();var s=gt.allowStateChanges;o&&(ut(),s=Xe(!0));var a=ht(!0),l={runAsAction_:o,prevDerivation_:i,prevAllowStateChanges_:s,prevAllowStateReads_:a,notifySpy_:n,startTime_:r,actionId_:He++,parentActionId_:ze};return ze=l.actionId_,l}(0,t);try{return n.apply(r,i)}catch(e){throw o.error_=e,e}finally{!function(e){ze!==e.actionId_&&a(30);ze=e.parentActionId_,void 0!==e.error_&&(gt.suppressReactionErrors=!0);Ye(e.prevAllowStateChanges_),dt(e.prevAllowStateReads_),St(),e.runAsAction_&&ct(e.prevDerivation_);gt.suppressReactionErrors=!1}(o)}}(0,n,t,r||this,arguments)}return void 0===n&&(n=!1),i.isMobxAction=!0,i.toString=function(){return t.toString()},Ge&&(We.value=e,d(i,"name",We)),i}function Xe(e){var t=gt.allowStateChanges;return gt.allowStateChanges=e,t}function Ye(e){gt.allowStateChanges=e}qe=Symbol.toPrimitive;var $e,Ze=function(e){function t(t,n,r,i,o){var s;return void 0===r&&(r="ObservableValue"),void 0===o&&(o=Z.default),(s=e.call(this,r)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=n,s.name_=r,s.equals=o,s.value_=n(t,void 0,r),s}K(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==gt.UNCHANGED&&this.setNewValue_(e)},n.prepareNewValue_=function(e){if(un(this)){var t=hn(this,{object:this,type:gn,newValue:e});if(!t)return gt.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?gt.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),dn(this)&&vn(this,{type:gn,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return cn(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:gn,newValue:this.value_,oldValue:void 0}),fn(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return V(this.get())},n[qe]=function(){return this.valueOf()},t}(X);$e=Symbol.toPrimitive;var Qe,et,tt=function(){function e(e){this.dependenciesState_=Qe.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Qe.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new rt(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=et.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||a(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=Je("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?Z.structural:Z.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==Qe.UP_TO_DATE_)return;e.lowestObserverState_=Qe.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Qe.UP_TO_DATE_&&(e.dependenciesState_=Qe.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing_&&a(32,this.name_,this.derivation),0!==gt.inBatch||0!==this.observers_.size||this.keepAlive_){if(Ot(this),ot(this)){var e=gt.trackingContext;this.keepAlive_&&!e&&(gt.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===Qe.STALE_)return;e.lowestObserverState_=Qe.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===Qe.POSSIBLY_STALE_?t.dependenciesState_=Qe.STALE_:t.dependenciesState_===Qe.UP_TO_DATE_&&(e.lowestObserverState_=Qe.UP_TO_DATE_)}))}(this),gt.trackingContext=e}}else ot(this)&&(this.warnAboutUntrackedRead_(),wt(),this.value_=this.computeValue_(!1),St());var t=this.value_;if(it(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter_&&a(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else a(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===Qe.NOT_TRACKING_,n=this.computeValue_(!0),r=t||it(e)||it(n)||!this.equals_(e,n);return r&&(this.value_=n),r},t.computeValue_=function(e){this.isComputing_=!0;var t,n=Xe(!1);if(e)t=st(this,this.derivation,this.scope_);else if(!0===gt.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new rt(e)}return Ye(n),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(at(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,r=!0,i=void 0;return function(e,t){var n,r,i,o,s;void 0===t&&(t=p);var a,l=null!=(n=null==(r=t)?void 0:r.name)?n:"Autorun";if(t.scheduler||t.delay){var u=Ft(t),c=!1;a=new xt(l,(function(){c||(c=!0,u((function(){c=!1,a.isDisposed_||a.track(h)})))}),t.onError,t.requiresObservable)}else a=new xt(l,(function(){this.track(h)}),t.onError,t.requiresObservable);function h(){e(a)}null!=(i=t)&&null!=(o=i.signal)&&o.aborted||a.schedule_();return a.getDisposer_(null==(s=t)?void 0:s.signal)}((function(){var o=n.get();if(!r||t){var s=ut();e({observableKind:"computed",debugObjectName:n.name_,type:gn,object:n,newValue:o,oldValue:i}),ct(s)}r=!1,i=o}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return V(this.get())},t[$e]=function(){return this.valueOf()},e}(),nt=P("ComputedValue",tt);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(Qe||(Qe={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(et||(et={}));var rt=function(e){this.cause=void 0,this.cause=e};function it(e){return e instanceof rt}function ot(e){switch(e.dependenciesState_){case Qe.UP_TO_DATE_:return!1;case Qe.NOT_TRACKING_:case Qe.STALE_:return!0;case Qe.POSSIBLY_STALE_:for(var t=ht(!0),n=ut(),r=e.observing_,i=r.length,o=0;o<i;o++){var s=r[o];if(nt(s)){if(gt.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return ct(n),dt(t),!0}if(e.dependenciesState_===Qe.STALE_)return ct(n),dt(t),!0}}return ft(e),ct(n),dt(t),!1}}function st(e,t,n){var r=ht(!0);ft(e),e.newObserving_=new Array(0===e.runId_?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++gt.runId;var i,o=gt.trackingDerivation;if(gt.trackingDerivation=e,gt.inBatch++,!0===gt.disableErrorBoundaries)i=t.call(n);else try{i=t.call(n)}catch(e){i=new rt(e)}return gt.inBatch--,gt.trackingDerivation=o,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=Qe.UP_TO_DATE_,i=0,o=e.unboundDepsCount_,s=0;s<o;s++){var a=n[s];0===a.diffValue_&&(a.diffValue_=1,i!==s&&(n[i]=a),i++),a.dependenciesState_>r&&(r=a.dependenciesState_)}n.length=i,e.newObserving_=null,o=t.length;for(;o--;){var l=t[o];0===l.diffValue_&&bt(l,e),l.diffValue_=0}for(;i--;){var u=n[i];1===u.diffValue_&&(u.diffValue_=0,mt(u,e))}r!==Qe.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}(e),dt(r),i}function at(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)bt(t[n],e);e.dependenciesState_=Qe.NOT_TRACKING_}function lt(e){var t=ut();try{return e()}finally{ct(t)}}function ut(){var e=gt.trackingDerivation;return gt.trackingDerivation=null,e}function ct(e){gt.trackingDerivation=e}function ht(e){var t=gt.allowStateReads;return gt.allowStateReads=e,t}function dt(e){gt.allowStateReads=e}function ft(e){if(e.dependenciesState_!==Qe.UP_TO_DATE_){e.dependenciesState_=Qe.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=Qe.UP_TO_DATE_}}var vt=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},pt=!0,_t=!1,gt=function(){var e=u();return e.__mx_isolated_mobxInstanceCount>0&&!e.__mx_isolated_mobxGlobals&&(pt=!1),e.__mx_isolated_mobxGlobals&&e.__mx_isolated_mobxGlobals.version!==(new vt).version&&(pt=!1),pt?e.__mx_isolated_mobxGlobals?(e.__mx_isolated_mobxInstanceCount+=1,e.__mx_isolated_mobxGlobals.UNCHANGED||(e.__mx_isolated_mobxGlobals.UNCHANGED={}),e.__mx_isolated_mobxGlobals):(e.__mx_isolated_mobxInstanceCount=1,e.__mx_isolated_mobxGlobals=new vt):(setTimeout((function(){_t||a(35)}),1),new vt)}();function mt(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function bt(e,t){e.observers_.delete(t),0===e.observers_.size&&yt(e)}function yt(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,gt.pendingUnobservations.push(e))}function wt(){gt.inBatch++}function St(){if(0==--gt.inBatch){Pt();for(var e=gt.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof tt&&n.suspend_())}gt.pendingUnobservations=[]}}function Ot(e){var t=gt.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&gt.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&gt.inBatch>0&&yt(e),!1)}function Et(e){e.lowestObserverState_!==Qe.STALE_&&(e.lowestObserverState_=Qe.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Qe.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=Qe.STALE_})))}var xt=function(){function e(e,t,n,r){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Qe.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=et.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=r}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,gt.pendingReactions.push(this),Pt())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){wt(),this.isScheduled_=!1;var e=gt.trackingContext;if(gt.trackingContext=this,ot(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}gt.trackingContext=e,St()}},t.track=function(e){if(!this.isDisposed_){wt(),this.isRunning_=!0;var t=gt.trackingContext;gt.trackingContext=this;var n=st(this,e,void 0);gt.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&at(this),it(n)&&this.reportExceptionInDerivation_(n.cause),St()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(gt.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";gt.suppressReactionErrors||console.error(n,e),gt.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(wt(),at(this),St()))},t.getDisposer_=function(e){var t=this,n=function n(){t.dispose(),null==e||null==e.removeEventListener||e.removeEventListener("abort",n)};return null==e||null==e.addEventListener||e.addEventListener("abort",n),n[J]=this,n},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){},e}(),At=100,Tt=function(e){return e()};function Pt(){gt.inBatch>0||gt.isRunningReactions||Tt(Ct)}function Ct(){gt.isRunningReactions=!0;for(var e=gt.pendingReactions,t=0;e.length>0;){++t===At&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}gt.isRunningReactions=!1}var kt=P("Reaction",xt);var It="action",Nt="autoAction",Vt=ne(It),Mt=ne("action.bound",{bound:!0}),jt=ne(Nt,{autoAction:!0}),Dt=ne("autoAction.bound",{autoAction:!0,bound:!0});function Rt(e){return function(t,n){return w(t)?Je(t.name||"<unnamed action>",t,e):w(n)?Je(t,n,e):W(n)?(e?jt:Vt).decorate_20223_(t,n):S(n)?G(t,n,e?jt:Vt):S(t)?H(ne(e?Nt:It,{name:t,autoAction:e})):void 0}}var Lt=Rt(!1);Object.assign(Lt,Vt);var Kt=Rt(!0);function Bt(e){return w(e)&&!0===e.isMobxAction}Object.assign(Kt,jt),Lt.bound=H(Mt),Kt.bound=H(Dt);var Ut=function(e){return e()};function Ft(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Ut}function qt(e,t,n){var r,i,o,s;void 0===n&&(n=p);var a,l,u,c=null!=(r=n.name)?r:"Reaction",h=Lt(c,n.onError?(a=n.onError,l=t,function(){try{return l.apply(this,arguments)}catch(e){a.call(this,e)}}):t),d=!n.scheduler&&!n.delay,f=Ft(n),v=!0,_=!1,g=n.compareStructural?Z.structural:n.equals||Z.default,m=new xt(c,(function(){v||d?b():_||(_=!0,f(b))}),n.onError,n.requiresObservable);function b(){if(_=!1,!m.isDisposed_){var t=!1,r=u;m.track((function(){var n=function(e,t){var n=Xe(e);try{return t()}finally{Ye(n)}}(!1,(function(){return e(m)}));t=v||!g(u,n),u=n})),(v&&n.fireImmediately||!v&&t)&&h(u,r,m),v=!1}}return null!=(i=n)&&null!=(o=i.signal)&&o.aborted||m.schedule_(),m.getDisposer_(null==(s=n)?void 0:s.signal)}var zt="onBO",Ht="onBUO";function Gt(e,t,n){return Wt(Ht,e,t,n)}function Wt(e,t,n,r){var i="function"==typeof r?or(t,n):or(t),o=w(r)?r:n,s=e+"L";return i[s]?i[s].add(o):i[s]=new Set([o]),function(){var e=i[s];e&&(e.delete(o),0===e.size&&delete i[s])}}var Jt="always";function Xt(e){!0===e.isolateGlobalState&&function(){if((gt.pendingReactions.length||gt.inBatch||gt.isRunningReactions)&&a(36),_t=!0,pt){var e=u();0==--e.__mx_isolated_mobxInstanceCount&&(e.__mx_isolated_mobxGlobals=void 0),gt=new vt}}();var t,n,r=e.useProxies,i=e.enforceActions;if(void 0!==r&&(gt.useProxies=r===Jt||"never"!==r&&"undefined"!=typeof Proxy),"ifavailable"===r&&(gt.verifyProxies=!0),void 0!==i){var o=i===Jt?Jt:"observed"===i;gt.enforceActions=o,gt.allowStateChanges=!0!==o&&o!==Jt}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(t){t in e&&(gt[t]=!!e[t])})),gt.allowStateReads=!gt.observableRequiresReaction,e.reactionScheduler&&(t=e.reactionScheduler,n=Tt,Tt=function(e){return t((function(){return n(e)}))})}function Yt(e){var t,n={name:e.name_};return e.observing_&&e.observing_.length>0&&(n.dependencies=(t=e.observing_,Array.from(new Set(t))).map(Yt)),n}var $t=0;function Zt(){this.message="FLOW_CANCELLED"}Zt.prototype=Object.create(Error.prototype);var Qt=ae("flow"),en=ae("flow.bound",{bound:!0}),tn=Object.assign((function(e,t){if(W(t))return Qt.decorate_20223_(e,t);if(S(t))return G(e,t,Qt);var n=e,r=n.name||"<unnamed flow>",i=function(){var e,t=arguments,i=++$t,o=Lt(r+" - runid: "+i+" - init",n).apply(this,t),s=void 0,a=new Promise((function(t,n){var a=0;function l(e){var t;s=void 0;try{t=Lt(r+" - runid: "+i+" - yield "+a++,o.next).call(o,e)}catch(e){return n(e)}c(t)}function u(e){var t;s=void 0;try{t=Lt(r+" - runid: "+i+" - yield "+a++,o.throw).call(o,e)}catch(e){return n(e)}c(t)}function c(e){if(!w(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(l,u);e.then(c,n)}e=n,l(void 0)}));return a.cancel=Lt(r+" - runid: "+i+" - cancel",(function(){try{s&&nn(s);var t=o.return(void 0),n=Promise.resolve(t.value);n.then(y,y),nn(n),e(new Zt)}catch(t){e(t)}})),a};return i.isMobXFlow=!0,i}),Qt);function nn(e){w(e.cancel)&&e.cancel()}function rn(e){return!0===(null==e?void 0:e.isMobXFlow)}function on(e){return function(e,t){return!!e&&(void 0!==t?!!Gn(e)&&e[J].values_.has(t):Gn(e)||!!e[J]||Y(e)||kt(e)||nt(e))}(e)}function sn(e,t){void 0===t&&(t=void 0),wt();try{return e.apply(t)}finally{St()}}function an(e){return e[J]}tn.bound=H(en);var ln={has:function(e,t){return an(e).has_(t)},get:function(e,t){return an(e).get_(t)},set:function(e,t,n){var r;return!!S(t)&&(null==(r=an(e).set_(t,n,!0))||r)},deleteProperty:function(e,t){var n;return!!S(t)&&(null==(n=an(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var r;return null==(r=an(e).defineProperty_(t,n))||r},ownKeys:function(e){return an(e).ownKeys_()},preventExtensions:function(e){a(13)}};function un(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function cn(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),b((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function hn(e,t){var n=ut();try{for(var r=[].concat(e.interceptors_||[]),i=0,o=r.length;i<o&&((t=r[i](t))&&!t.type&&a(14),t);i++);return t}finally{ct(n)}}function dn(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function fn(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),b((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function vn(e,t){var n=ut(),r=e.changeListeners_;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](t);ct(n)}}function pn(e,t,n){return lr((function(){var r=qn(e,n)[J];null!=t||(t=function(e){return M(e,z)||A(e,z,L({},e[z])),e[z]}(e)),N(t).forEach((function(e){return r.make_(e,t[e])}))})),e}var _n="splice",gn="update",mn={get:function(e,t){var n=e[J];return t===J?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?M(wn,t)?wn[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var r=e[J];return"length"===t&&r.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){a(15)}},bn=function(){function e(e,t,n,r){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new X(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return cn(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),fn(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&a("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&a(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&rr(e+t+1)},t.spliceWithArray_=function(e,t,n){var r=this;this.atom_;var i=this.values_.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===n&&(n=v),un(this)){var o=hn(this,{object:this.proxy_,type:_n,index:e,removedCount:t,added:n});if(!o)return v;t=o.removedCount,n=o.added}if(n=0===n.length?n:n.map((function(e){return r.enhancer_(e,void 0)})),this.legacyMode_){var s=n.length-t;this.updateArrayLength_(i,s)}var a=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,a),this.dehanceValues_(a)},t.spliceItemsIntoValues_=function(e,t,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[e,t].concat(n));var i=this.values_.slice(e,e+t),o=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var s=0;s<n.length;s++)this.values_[e+s]=n[s];for(var a=0;a<o.length;a++)this.values_[e+n.length+a]=o[a];return i},t.notifyArrayChildUpdate_=function(e,t,n){var r=!this.owned_&&!1,i=dn(this),o=i||r?{observableKind:"array",object:this.proxy_,type:gn,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),i&&vn(this,o)},t.notifyArraySplice_=function(e,t,n){var r=!this.owned_&&!1,i=dn(this),o=i||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:_n,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),i&&vn(this,o)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&a(17,e,n.length),e<n.length){this.atom_;var r=n[e];if(un(this)){var i=hn(this,{type:gn,object:this.proxy_,index:e,newValue:t});if(!i)return;t=i.newValue}(t=this.enhancer_(t,r))!==r&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,r))}else{for(var o=new Array(e+1-n.length),s=0;s<o.length-1;s++)o[s]=void 0;o[o.length-1]=t,this.spliceWithArray_(n.length,0,o)}},e}();function yn(e,t,n,r){return void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),m(),lr((function(){var i=new bn(n,t,r,!1);T(i.values_,J,i);var o=new Proxy(i.values_,mn);return i.proxy_=o,e&&e.length&&i.spliceWithArray_(0,0,e),o}))}var wn={clear:function(){return this.splice(0)},replace:function(e){var t=this[J];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=this[J];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(e);case 2:return o.spliceWithArray_(e,t)}return o.spliceWithArray_(e,t,r)},spliceWithArray:function(e,t,n){return this[J].spliceWithArray_(e,t,n)},push:function(){for(var e=this[J],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[J].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[J],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return gt.trackingDerivation&&a(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){gt.trackingDerivation&&a(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[J],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function Sn(e,t){"function"==typeof Array.prototype[e]&&(wn[e]=t(e))}function On(e){return function(){var t=this[J];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function En(e){return function(t,n){var r=this,i=this[J];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[e]((function(e,i){return t.call(n,e,i,r)}))}}function xn(e){return function(){var t=this,n=this[J];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(e,n,r){return i(e,n,r,t)},r[e].apply(r,arguments)}}Sn("at",On),Sn("concat",On),Sn("flat",On),Sn("includes",On),Sn("indexOf",On),Sn("join",On),Sn("lastIndexOf",On),Sn("slice",On),Sn("toString",On),Sn("toLocaleString",On),Sn("toSorted",On),Sn("toSpliced",On),Sn("with",On),Sn("every",En),Sn("filter",En),Sn("find",En),Sn("findIndex",En),Sn("findLast",En),Sn("findLastIndex",En),Sn("flatMap",En),Sn("forEach",En),Sn("map",En),Sn("some",En),Sn("toReversed",En),Sn("reduce",xn),Sn("reduceRight",xn);var An,Tn,Pn=P("ObservableArrayAdministration",bn);function Cn(e){return O(e)&&Pn(e[J])}var kn={},In="add",Nn="delete";An=Symbol.iterator,Tn=Symbol.toStringTag;var Vn,Mn,jn=function(){function e(e,t,n){var r=this;void 0===t&&(t=Q),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[J]=kn,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,w(Map)||a(18),lr((function(){r.keysAtom_=$("ObservableMap.keys()"),r.data_=new Map,r.hasMap_=new Map,e&&r.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!gt.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var r=n=new Ze(this.has_(e),ee,"ObservableMap.key?",!1);this.hasMap_.set(e,r),Gt(r,(function(){return t.hasMap_.delete(e)}))}return n.get()},t.set=function(e,t){var n=this.has_(e);if(un(this)){var r=hn(this,{type:n?gn:In,object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,un(this))&&!hn(this,{type:Nn,object:this,name:e}))return!1;if(this.has_(e)){var n=dn(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:Nn,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return sn((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&vn(this,r),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==gt.UNCHANGED){var r=dn(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:gn,object:this,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),r&&vn(this,i)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,sn((function(){var r,i=new Ze(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,i),t=i.value_,null==(r=n.hasMap_.get(e))||r.setNewValue_(!0),n.keysAtom_.reportChanged()}));var r=dn(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:In,object:this,name:e,newValue:t}:null;r&&vn(this,i)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return fr({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:e.get(i)}}})},t.entries=function(){var e=this,t=this.keys();return fr({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,e.get(i)]}}})},t[An]=function(){return this.entries()},t.forEach=function(e,t){for(var n,r=q(this);!(n=r()).done;){var i=n.value,o=i[0],s=i[1];e.call(t,s,o,this)}},t.merge=function(e){var t=this;return Dn(e)&&(e=new Map(e)),sn((function(){E(e)?function(e){var t=Object.keys(e);if(!I)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return f.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],r=e[1];return t.set(n,r)})):C(e)?(e.constructor!==Map&&a(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&a(20,e)})),this},t.clear=function(){var e=this;sn((function(){lt((function(){for(var t,n=q(e.keys());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.replace=function(e){var t=this;return sn((function(){for(var n,r=function(e){if(C(e)||Dn(e))return e;if(Array.isArray(e))return new Map(e);if(E(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return a(21,e)}(e),i=new Map,o=!1,s=q(t.data_.keys());!(n=s()).done;){var l=n.value;if(!r.has(l))if(t.delete(l))o=!0;else{var u=t.data_.get(l);i.set(l,u)}}for(var c,h=q(r.entries());!(c=h()).done;){var d=c.value,f=d[0],v=d[1],p=t.data_.has(f);if(t.set(f,v),t.data_.has(f)){var _=t.data_.get(f);i.set(f,_),p||(o=!0)}}if(!o)if(t.data_.size!==i.size)t.keysAtom_.reportChanged();else for(var g=t.data_.keys(),m=i.keys(),b=g.next(),y=m.next();!b.done;){if(b.value!==y.value){t.keysAtom_.reportChanged();break}b=g.next(),y=m.next()}t.data_=i})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return fn(this,e)},t.intercept_=function(e){return cn(this,e)},R(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Tn,get:function(){return"Map"}}]),e}(),Dn=P("ObservableMap",jn);var Rn={};Vn=Symbol.iterator,Mn=Symbol.toStringTag;var Ln=function(){function e(e,t,n){var r=this;void 0===t&&(t=Q),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[J]=Rn,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,w(Set)||a(22),this.enhancer_=function(e,r){return t(e,r,n)},lr((function(){r.atom_=$(r.name_),e&&r.replace(e)}))}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;sn((function(){lt((function(){for(var t,n=q(e.data_.values());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.forEach=function(e,t){for(var n,r=q(this);!(n=r()).done;){var i=n.value;e.call(t,i,i,this)}},t.add=function(e){var t=this;if((this.atom_,un(this))&&!hn(this,{type:In,object:this,newValue:e}))return this;if(!this.has(e)){sn((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=dn(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:In,object:this,newValue:e}:null;n&&vn(this,r)}return this},t.delete=function(e){var t=this;if(un(this)&&!hn(this,{type:Nn,object:this,oldValue:e}))return!1;if(this.has(e)){var n=dn(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:Nn,object:this,oldValue:e}:null;return sn((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&vn(this,r),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return fr({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return fr({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return Kn(e)&&(e=new Set(e)),sn((function(){Array.isArray(e)||k(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&a("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return fn(this,e)},t.intercept_=function(e){return cn(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Vn]=function(){return this.values()},R(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Mn,get:function(){return"Set"}}]),e}(),Kn=P("ObservableSet",Ln),Bn=Object.create(null),Un="remove",Fn=function(){function e(e,t,n,r){void 0===t&&(t=new Map),void 0===r&&(r=we),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new X("ObservableObject.keys"),this.isPlainObject_=E(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof tt)return n.set(t),!0;if(un(this)){var r=hn(this,{type:gn,object:this.proxy_||this.target_,name:e,newValue:t});if(!r)return null;t=r.newValue}if((t=n.prepareNewValue_(t))!==gt.UNCHANGED){var i=dn(this),o=i?{type:gn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),i&&vn(this,o)}return!0},t.get_=function(e){return gt.trackingDerivation&&!M(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),M(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!gt.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new Ze(e in this.target_,ee,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(!(e in this.target_)){var n;if(null!=(n=this.target_[z])&&n[e])return;a(1,t.annotationType_,this.name_+"."+e.toString())}for(var r=this.target_;r&&r!==f;){var i=h(r,e);if(i){var o=t.make_(this,e,i,r);if(0===o)return;if(1===o)break}r=Object.getPrototypeOf(r)}Wn(this,t,e)}},t.extend_=function(e,t,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,r);var i=n.extend_(this,e,t,r);return i&&Wn(this,n,e),i},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{wt();var r=this.delete_(e);if(!r)return r;if(un(this)){var i=hn(this,{object:this.proxy_||this.target_,name:e,type:In,newValue:t.value});if(!i)return null;var o=i.newValue;t.value!==o&&(t=L({},t,{value:o}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else d(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{St()}return!0},t.defineObservableProperty_=function(e,t,n,r){void 0===r&&(r=!1),this.keysAtom_;try{wt();var i=this.delete_(e);if(!i)return i;if(un(this)){var o=hn(this,{object:this.proxy_||this.target_,name:e,type:In,newValue:t});if(!o)return null;t=o.newValue}var s=Hn(e),a={configurable:!gt.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(r){if(!Reflect.defineProperty(this.target_,e,a))return!1}else d(this.target_,e,a);var l=new Ze(t,n,"ObservableObject.key",!1);this.values_.set(e,l),this.notifyPropertyAddition_(e,l.value_)}finally{St()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{wt();var r=this.delete_(e);if(!r)return r;if(un(this))if(!hn(this,{object:this.proxy_||this.target_,name:e,type:In,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var i=Hn(e),o={configurable:!gt.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(n){if(!Reflect.defineProperty(this.target_,e,o))return!1}else d(this.target_,e,o);this.values_.set(e,new tt(t)),this.notifyPropertyAddition_(e,void 0)}finally{St()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),this.keysAtom_,!M(this.target_,e))return!0;if(un(this)&&!hn(this,{object:this.proxy_||this.target_,name:e,type:Un}))return null;try{var n,r;wt();var i,o=dn(this),s=this.values_.get(e),a=void 0;if(!s&&o)a=null==(i=h(this.target_,e))?void 0:i.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(s&&(this.values_.delete(e),s instanceof Ze&&(a=s.value_),Et(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(e in this.target_),o){var l={type:Un,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:a,name:e};0,o&&vn(this,l)}}finally{St()}return!0},t.observe_=function(e,t){return fn(this,e)},t.intercept_=function(e){return cn(this,e)},t.notifyPropertyAddition_=function(e,t){var n,r,i=dn(this);if(i){var o=i?{type:In,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;i&&vn(this,o)}null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),N(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function qn(e,t){var n;if(M(e,J))return e;var r=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",i=new Fn(e,new Map,String(r),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:Se(e):void 0}(t));return A(e,J,i),e}var zn=P("ObservableObjectAdministration",Fn);function Hn(e){return Bn[e]||(Bn[e]={get:function(){return this[J].getObservablePropValue_(e)},set:function(t){return this[J].setObservablePropValue_(e,t)}})}function Gn(e){return!!O(e)&&zn(e[J])}function Wn(e,t,n){var r;null==(r=e.target_[z])||delete r[n]}var Jn,Xn,Yn=tr(0),$n=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,!1===e}(),Zn=0,Qn=function(){};Jn=Qn,Xn=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Jn.prototype,Xn):void 0!==Jn.prototype.__proto__?Jn.prototype.__proto__=Xn:Jn.prototype=Xn;var er=function(e,t,n){function r(t,n,r,i){var o;return void 0===r&&(r="ObservableArray"),void 0===i&&(i=!1),o=e.call(this)||this,lr((function(){var e=new bn(r,n,i,!0);e.proxy_=U(o),T(U(o),J,e),t&&t.length&&o.spliceWithArray(0,0,t),$n&&Object.defineProperty(U(o),"0",Yn)})),o}K(r,e);var i=r.prototype;return i.concat=function(){this[J].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return Cn(e)?e.slice():e})))},i[n]=function(){var e=this,t=0;return fr({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},R(r,[{key:"length",get:function(){return this[J].getArrayLength_()},set:function(e){this[J].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),r}(Qn,Symbol.toStringTag,Symbol.iterator);function tr(e){return{enumerable:!1,configurable:!0,get:function(){return this[J].get_(e)},set:function(t){this[J].set_(e,t)}}}function nr(e){d(er.prototype,""+e,tr(e))}function rr(e){if(e>Zn){for(var t=Zn;t<e+100;t++)nr(t);Zn=e}}function ir(e,t,n){return new er(e,t,n)}function or(e,t){if("object"==typeof e&&null!==e){if(Cn(e))return void 0!==t&&a(23),e[J].atom_;if(Kn(e))return e.atom_;if(Dn(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||a(25,t,ar(e)),n}if(Gn(e)){if(!t)return a(26);var r=e[J].values_.get(t);return r||a(27,t,ar(e)),r}if(Y(e)||nt(e)||kt(e))return e}else if(w(e)&&kt(e[J]))return e[J];a(28)}function sr(e,t){return e||a(29),void 0!==t?sr(or(e,t)):Y(e)||nt(e)||kt(e)||Dn(e)||Kn(e)?e:e[J]?e[J]:void a(24,e)}function ar(e,t){var n;if(void 0!==t)n=or(e,t);else{if(Bt(e))return e.name;n=Gn(e)||Dn(e)||Kn(e)?sr(e):or(e)}return n.name_}function lr(e){var t=ut(),n=Xe(!0);wt();try{return e()}finally{St(),Ye(n),ct(t)}}Object.entries(wn).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&A(er.prototype,t,n)})),rr(1e3);var ur=f.toString;function cr(e,t,n){return void 0===n&&(n=-1),hr(e,t,n)}function hr(e,t,n,r,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;if("function"!==o&&"object"!==o&&"object"!=typeof t)return!1;var s=ur.call(e);if(s!==ur.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=dr(e),t=dr(t);var a="[object Array]"===s;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var l=e.constructor,u=t.constructor;if(l!==u&&!(w(l)&&l instanceof l&&w(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),i=i||[];for(var c=(r=r||[]).length;c--;)if(r[c]===e)return i[c]===t;if(r.push(e),i.push(t),a){if((c=e.length)!==t.length)return!1;for(;c--;)if(!hr(e[c],t[c],n-1,r,i))return!1}else{var h,d=Object.keys(e);if(c=d.length,Object.keys(t).length!==c)return!1;for(;c--;)if(!M(t,h=d[c])||!hr(e[h],t[h],n-1,r,i))return!1}return r.pop(),i.pop(),!0}function dr(e){return Cn(e)?e.slice():C(e)||Dn(e)||k(e)||Kn(e)?Array.from(e.entries()):e}function fr(e){return e[Symbol.iterator]=vr,e}function vr(){return this}if(["Symbol","Map","Set"].forEach((function(e){void 0===u()[e]&&a("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:ar},$mobx:J}),!t.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!pn)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function pr(e){e()}function _r(e){return Yt(or(e,t));var t}var gr,mr,br=function(){function e(e){var t=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=1e4),clearTimeout(t.sweepTimeout),t.sweepTimeout=void 0;var n=Date.now();t.registrations.forEach((function(r,i){n-r.registeredAt>=e&&(t.finalize(r.value),t.registrations.delete(i))})),t.registrations.size>0&&t.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this.registrations.set(n,{value:t,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){void 0===this.sweepTimeout&&(this.sweepTimeout=setTimeout(this.sweep,1e4))}}),e}(),yr=new("undefined"!=typeof FinalizationRegistry?FinalizationRegistry:br)((function(e){var t;null===(t=e.reaction)||void 0===t||t.dispose(),e.reaction=null}));function wr(e){e.reaction=new xt("observer".concat(e.name),(function(){var t;e.stateVersion=Symbol(),null===(t=e.onStoreChange)||void 0===t||t.call(e)}))}var Sr="function"==typeof Symbol&&Symbol.for,Or=null!==(mr=null===(gr=Object.getOwnPropertyDescriptor((function(){}),"name"))||void 0===gr?void 0:gr.configurable)&&void 0!==mr&&mr,Er=Sr?Symbol.for("react.forward_ref"):"function"==typeof t.forwardRef&&t.forwardRef((function(e){return null})).$$typeof,xr=Sr?Symbol.for("react.memo"):"function"==typeof t.memo&&t.memo((function(e){return null})).$$typeof;var Ar={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};!function(e){e||(e=pr),Xt({reactionScheduler:e})}(n.unstable_batchedUpdates),yr.finalizeAllImmediately;const Tr=Object.freeze({reset:{value:"reset.value",filters:"reset.filters"},set:{value:"set.value"}});function Pr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Cr=()=>({emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let t=0,r=this.events[e]||[],i=r.length;t<i;t++)r[t](...n)},events:{},on(e,t){var n;return((n=this.events)[e]||(n[e]=[])).push(t),()=>{var n;this.events[e]=null===(n=this.events[e])||void 0===n?void 0:n.filter((e=>t!==e))}}});const kr="com.mendix.widgets.web.plugin.externalEvents";class Ir{constructor(){Pr(this,"channels",void 0),Pr(this,"id",Math.random().toString().slice(2)),this.channels=new Map}disposeChannel(e){const t=this.channels.get(e);return t&&(t.events={}),this.channels.delete(e)}getChannel(e){let t=this.channels.get(e);return t||(t=Cr(),this.channels.set(e,t),t)}emit(e,t){for(var n,r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];null===(n=this.channels.get(e))||void 0===n||n.emit(t,...i)}subscribe(e,t,n){return this.getChannel(e).on(t,n),()=>this.unsubscribe(e,t,n)}unsubscribe(e,t,n){const r=this.channels.get(e);if(!r)return;const i=r.events[t];i&&(r.events[t]=i.filter((e=>e!==n)));0===Object.values(r.events).flat().reduce(((e,t)=>t?e+1:e),0)&&this.disposeChannel(e)}}function Nr(){var e,t;return null!==(t=(e=window)[kr])&&void 0!==t?t:e[kr]=function(){if(Object.prototype.hasOwnProperty.call(window,kr))throw new Error("Widget plugin external events: plugin already initialized!");return new Ir}()}const Vr=function(){return Nr().emit(...arguments)};function Mr(e){var n,r,i;n=e.inputChannel,r=e.event,i=t.useRef((function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.onEvent(Vr,n)})).current,t.useEffect((()=>{if(void 0!==n)return Nr().subscribe(n,r,i)}),[n,r])}const jr=e=>{e&&e.canExecute&&!e.isExecuting&&e.execute()};class Dr{constructor(e,t){Pr(this,"trigger",void 0),Pr(this,"listAction",void 0),Pr(this,"onExecuteAction",(e=>{this.listAction&&"get"in this.listAction&&jr(this.listAction.get(e))})),this.trigger=e,this.listAction=t}get clickTrigger(){return this.listAction?this.trigger:"none"}update(e){this.listAction=e}}function Rr(e,t){return"".concat(e,",").concat(t)}function Lr(e){const[t,n]=e.split(",");return[parseInt(t,10),parseInt(n,10)]}class Kr{constructor(e,t){Pr(this,"_listeners",void 0),Pr(this,"_focusTarget",void 0),Pr(this,"_positionController",void 0),Pr(this,"_layout",void 0),Pr(this,"dispatch",(e=>{const t=this._positionController.dispatch(e,this._layout);void 0!==t&&t!==this._focusTarget&&("Keyboard"===e.type?this._setTargetAndFocus(t):this._setTarget(t))})),this._listeners=[],this._focusTarget=this._getInitPosition(),this._positionController=e,this._layout=t}get focusTarget(){return this._focusTarget}addListener(e){this._listeners.push(e)}removeListener(e){this._listeners.splice(this._listeners.indexOf(e),1)}updateGridLayout(e){this._layout=e,void 0===this._layout.get(Lr(this._focusTarget))&&this._setTarget(this._getInitPosition())}_setTarget(e){const t=this._focusTarget;this._focusTarget=e,this._emit({lastPos:t,targetPos:e,shouldFocus:!1})}_setTargetAndFocus(e){const t=this._focusTarget;this._focusTarget=e,this._emit({lastPos:t,targetPos:e,shouldFocus:!0})}_emit(e){for(const t of this._listeners)t(e)}_getInitPosition(){return Rr(0,0)}}class Br{constructor(e,t,n){Pr(this,"rows",void 0),Pr(this,"columns",void 0),Pr(this,"pageSize",void 0),Pr(this,"_positions",void 0),this.columns=t,this.rows=e,this.pageSize=n,this._positions=new Set;for(let n=0;n<e;n+=1)for(let e=0;e<t;e+=1)this._positions.add(Rr(e,n))}get(e){let[t,n]=e;const r=Rr(t<0?this.columns+t:t,n<0?this.rows+n:n);if(this._positions.has(r))return r}}const Ur=new Set(["ArrowUp","ArrowRight","ArrowDown","ArrowLeft","PageUp","PageDown","End","Home"]);const Fr={ArrowUp:function(e){let[t,n]=e;return[t,Math.max(0,n-1)]},ArrowRight:function(e){let[t,n]=e;return[t+1,n]},ArrowDown:function(e){let[t,n]=e;return[t,n+1]},ArrowLeft:function(e){let[t,n]=e;return[Math.max(0,t-1),n]},PageUp:(e,t)=>function(e,t){let[n,r]=e;return[n,Math.max(0,r-t)]}(e,t.pageSize),PageDown:(e,t)=>function(e,t,n){let[r,i]=e;return[r,Math.min(n-1,i+t)]}(e,t.pageSize,t.rows),End:(e,t,n)=>{let{ctrlKey:r}=n;return r?[-1,-1]:function(e){let[t,n]=e;return[-1,n]}(e)},Home:(e,t,n)=>{let{ctrlKey:r}=n;return r?[0,0]:function(e){let[t,n]=e;return[0,n]}(e)}};class qr{dispatch(e,t){return"Focus"===e.type?this._handleFocusEvent(e.reactEvent):"Mouse"===e.type?this._handleMouseEvent(e.reactEvent):this._handleKeyboardEvent(e.reactEvent,t)}_handleKeyboardEvent(e,t){if(n=e.code,!Ur.has(n))return;var n;if(!Object.hasOwn(Fr,e.code))throw new Error("Keyboard nav: can't find handler for ".concat(e.code," key"));e.preventDefault();const r=Lr(this._getTargetPosition(e));return t.get(Fr[e.code](r,t,e))}_handleMouseEvent(e){return this._getTargetPosition(e)}_handleFocusEvent(e){return this._getTargetPosition(e)}_getTargetPosition(e){var t;const n=null===(t=e.currentTarget.dataset)||void 0===t?void 0:t.position;if(void 0===n)throw new Error("Keyboard navigation: target position is missing");return n}}class zr{constructor(e){Pr(this,"selectionValue",void 0),Pr(this,"type","Single"),this.selectionValue=e}updateProps(e){this.selectionValue=e}isSelected(e){var t;return(null===(t=this.selectionValue.selection)||void 0===t?void 0:t.id)===e.id}reduceTo(e){this.selectionValue.setSelection(e)}remove(e){this.selectionValue.setSelection(void 0)}}class Hr{constructor(e,t){Pr(this,"selectionValue",void 0),Pr(this,"selectableItems",void 0),Pr(this,"type","Multi"),Pr(this,"rangeStart",void 0),Pr(this,"rangeEnd",void 0),this.selectionValue=e,this.selectableItems=t,this.rangeStart=void 0}isSelected(e){return this.selectionValue.selection.some((t=>t.id===e.id))}updateProps(e,t){this.selectionValue=e,this.selectableItems=t}get selectionStatus(){return 0===this.selectionValue.selection.length?"none":this.selectionValue.selection.length===this.selectableItems.length?"all":"some"}add(e){this._add(e),this._setRangeStart(e),this._setRangeEnd(void 0)}remove(e){this.isSelected(e)&&this.selectionValue.setSelection(this.selectionValue.selection.filter((t=>t.id!==e.id))),this._resetRange()}reduceTo(e){this.selectionValue.setSelection([e]),this._setRangeStart(e),this._setRangeEnd(void 0)}_add(e){this.isSelected(e)||this.selectionValue.setSelection(this.selectionValue.selection.concat(e))}_setRangeStart(e){let t=-1;void 0!==e&&(t=this.selectableItems.indexOf(e)),this.rangeStart=t>-1?t:void 0}_setRangeEnd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length)return void(this.rangeEnd=void 0);const[r,i]=t,o=this.rangeEnd,s=this.selectableItems.indexOf(r);this.rangeEnd=s>-1?s:void 0,this._updateSelectionWithRange({start:this.rangeStart,end:o,newEnd:s,selectionMode:i})}_updateSelectionWithRange(e){const{start:t,end:n,newEnd:r,selectionMode:i}=e,o="toggle"===i;if(void 0===t||-1===r||n===r)return;if(void 0===n){let e=this._getRange(t,r);return e=o?this._union(this.selectionValue.selection,e):e,void this.selectionValue.setSelection(e)}const s=this._getRange(t,n),a=this._getRange(t,r);let l=o?[...this.selectionValue.selection]:[];l=this._diff(l,s),l=this._union(l,a),this.selectionValue.setSelection(l)}_getRange(e,t){const n=this.selectableItems.length,[r,i]=[Gr(e,0,n),Gr(t,0,n)].sort(((e,t)=>e-t));return this.selectableItems.slice(r,i+1)}_resetRange(){this._setRangeStart(void 0),this._setRangeEnd(void 0)}_union(e,t){const n=[...e],r=new Set(e.map((e=>e.id)));for(const e of t)r.has(e.id)||(r.add(e.id),n.push(e));return n}_diff(e,t){const n=new Set(e),r=new Set(t.map((e=>e.id)));for(const e of n)r.has(e.id)&&n.delete(e);return Array.from(n)}selectAll(){this.selectionValue.setSelection(this.selectableItems),this._resetRange()}selectNone(){this.selectionValue.setSelection([]),this._resetRange()}selectUpTo(e,t){void 0===this.rangeStart?(this._add(e),this._setRangeStart(e)):this._setRangeEnd(e,t)}_findIndexInList(e,t,n){const r=this.selectableItems.length-1,i="forward"===t;if("edge"===n)return i?r:0;return Gr(i?e+n:e-n,0,r)}_findIndexInGrid(e,t,n){const{columnIndex:r}=Jr(n,this.selectableItems.length,e);return"PageDown"===t?this.selectableItems.length-(n-r):"Home"===t?e-r:"End"===t?e+(n-(r+1)):r}selectUpToAdjacent(e,t,n,r){if(!1===t)return void this._resetRange();const i=this.selectableItems.findIndex((t=>t.id===e.id));let o=-1;if(o="direction"in r?this._findIndexInList(i,r.direction,r.size):this._findIndexInGrid(i,r.code,r.numberOfColumns),o===i)return;void 0===this.rangeStart&&this._setRangeStart(e);const s=this.selectableItems.at(o);s&&this._setRangeEnd(s,n)}}const Gr=(e,t,n)=>Math.min(Math.max(e,t),n);function Wr(e,n,r){const i=t.useRef([]),o=t.useRef(!1);o.current||(o.current="loading"!==(null==n?void 0:n.status)),t.useEffect((()=>{var t;const n=i.current,s=null!==(t=null==e?void 0:e.selection)&&void 0!==t?t:[],a=Array.isArray(s)?s:[s];(function(e,t){if(e.length!==t.length)return!1;const n=new Set(t.map((e=>e.id)));return e.every((e=>n.has(e.id)))})(n,a)||(i.current=a,o.current&&jr(r))}),[null==e?void 0:e.selection,r]);const s=t.useRef(void 0);var a,l;void 0!==e&&("Single"===e.type?s.current?s.current.updateProps(e):s.current=new zr(e):s.current?s.current.updateProps(e,null!==(a=n.items)&&void 0!==a?a:[]):s.current=new Hr(e,null!==(l=n.items)&&void 0!==l?l:[]));return s.current}function Jr(e,t,n){if(n<0||n>=t)return{columnIndex:-1,rowIndex:-1};const r=n%e,i=function(e,t){return Math.floor(e/t)}(n,e);return{columnIndex:r,rowIndex:i}}const Xr=new Set(["KeyA","MetaLeft","MetaRight","ControlLeft","ControlRight"]),Yr=(e,t)=>{let n=!1;const[r,i]=function(e,t){let n=0,r=0;return[function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];const a=(new Date).getTime()-r,l=()=>{n=0,r=(new Date).getTime(),e(...o)};n||(a>=t?l():n=window.setTimeout(l,t-a))},()=>{clearTimeout(n),n=0}]}((()=>{n=!0,e()}),500),o={eventName:"onKeyDown",filter:(e,t)=>"Multi"===e.selectionType&&function(e){const t=e.currentTarget===e.target;return"KeyA"===e.code&&(e.metaKey||e.ctrlKey)&&t}(t),handler:r};return[o,{eventName:"onKeyUp",filter:(e,t)=>"Multi"===e.selectionType&&Xr.has(t.code)&&n,handler:()=>{n=!1,i(),null==t||t()}}]};function $r(e,t){return t.metaKey||t.ctrlKey?"toggle":e.selectionMode}const Zr=(e,t)=>{const n={eventName:"onKeyDown",filter:(e,t)=>"ArrowUp"===t.code&&"Multi"===e.selectionType,handler:(n,r)=>e(n.item,r.shiftKey,$r(n,r),{direction:"backward",size:t})},r={eventName:"onKeyDown",filter:(e,t)=>"ArrowDown"===t.code&&"Multi"===e.selectionType,handler:(n,r)=>e(n.item,r.shiftKey,$r(n,r),{direction:"forward",size:t})},i={eventName:"onKeyDown",filter:(e,t)=>"ArrowLeft"===t.code&&"Multi"===e.selectionType,handler:(t,n)=>e(t.item,n.shiftKey,$r(t,n),{direction:"backward",size:1})},o={eventName:"onKeyDown",filter:(e,t)=>"ArrowRight"===t.code&&"Multi"===e.selectionType,handler:(t,n)=>e(t.item,n.shiftKey,$r(t,n),{direction:"forward",size:1})},s=new Set(["PageUp","PageDown","Home","End"]);return[n,r,i,o,{eventName:"onKeyDown",filter:(e,t)=>s.has(t.code)&&"Multi"===e.selectionType,handler:(n,r)=>e(n.item,r.shiftKey,$r(n,r),{code:r.code,numberOfColumns:t})}]},Qr="com.mendix.widgets.web.selectable.selectionContext";class ei{constructor(e,t){var n=this;Pr(this,"selection",void 0),Pr(this,"selectionHelper",void 0),Pr(this,"onSelect",(function(){n.selectionHelper&&("Multi"===n.selectionHelper.type?n._onSelectItemMulti(...arguments):n._onSelectItemSingle(...arguments))})),Pr(this,"_onSelectItemMulti",(function(e,t){var r;let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"Multi"===(null===(r=n.selectionHelper)||void 0===r?void 0:r.type)&&(t?n.selectionHelper.selectUpTo(e,i?"toggle":"clear"):n.selectItem(e,i))})),Pr(this,"_onSelectItemSingle",(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.selectItem(e,r)})),Pr(this,"onSelectAll",(e=>{this.selectionHelper&&("Single"!==this.selectionHelper.type?"selectAll"!==e&&"all"===this.selectionHelper.selectionStatus?this.selectionHelper.selectNone():this.selectionHelper.selectAll():console.warn("Datagrid: calling onSelectAll in single selection mode have no effect"))})),Pr(this,"onSelectAdjacent",(function(){var e;"Multi"===(null===(e=n.selectionHelper)||void 0===e?void 0:e.type)&&n.selectionHelper.selectUpToAdjacent(...arguments)})),Pr(this,"isSelected",(e=>!!this.selectionHelper&&this.selectionHelper.isSelected(e))),Pr(this,"selectItem",((e,t)=>{void 0!==this.selectionHelper&&(!1!==t?this.selectionHelper.isSelected(e)?this.selectionHelper.remove(e):"Multi"===this.selectionHelper.type?this.selectionHelper.add(e):this.selectionHelper.reduceTo(e):this.selectionHelper.reduceTo(e))})),this.selection=e,this.selectionHelper=t}get selectionType(){if(void 0===this.selection)return"None";if("object"==typeof this.selection)return this.selection.type;if("None"===this.selection||"Single"===this.selection||"Multi"===this.selection)return this.selection;throw new Error("Unknown selection type: ".concat(this.selection))}}function ti(e){let{direction:n}=e;const r="pagination-icon ".concat(n);switch(n){case"forward":return t.createElement("span",{"aria-hidden":!0},t.createElement("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M17.81 6.63C17.48 6.37 17 6.61 17 7.02V24.98C17 25.4 17.48 25.63 17.81 25.37L28.5 16.39C28.76 16.19 28.76 15.8 28.5 15.6L17.81 6.63Z",fill:"currentColor"}),t.createElement("path",{d:"M4.81 6.63C4.48 6.37 4 6.61 4 7.02V24.98C4 25.4 4.48 25.63 4.81 25.37L15.5 16.39C15.76 16.19 15.76 15.8 15.5 15.6L4.81 6.63Z",fill:"currentColor"})));case"step-forward":return t.createElement("span",{"aria-hidden":!0},t.createElement("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M8.81 6.63C8.48 6.37 8 6.61 8 7.02V24.98C8 25.4 8.48 25.63 8.81 25.37L20.5 16.39C20.76 16.19 20.76 15.8 20.5 15.6L8.81 6.63Z",fill:"currentColor"}),t.createElement("path",{d:"M24 6H22V26H24V6Z",fill:"currentColor"})));case"backward":return t.createElement("span",{"aria-hidden":!0},t.createElement("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M14.19 6.63L3.51 15.61C3.25 15.81 3.25 16.2 3.51 16.4L14.2 25.38C14.53 25.64 15.01 25.4 15.01 24.99V7.02C15.01 6.6 14.53 6.37 14.2 6.63H14.19Z",fill:"currentColor"}),t.createElement("path",{d:"M27.19 6.63L16.5 15.61C16.24 15.81 16.24 16.2 16.5 16.4L27.19 25.38C27.52 25.64 28 25.4 28 24.99V7.02C28 6.6 27.52 6.37 27.19 6.63Z",fill:"currentColor"})));case"step-backward":return t.createElement("span",{"aria-hidden":!0},t.createElement("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M23.19 6.63L11.51 15.61C11.25 15.81 11.25 16.2 11.51 16.4L23.2 25.38C23.53 25.64 24.01 25.4 24.01 24.99V7.02C24.01 6.6 23.53 6.37 23.2 6.63H23.19Z",fill:"currentColor"}),t.createElement("path",{d:"M10 6H8V26H10V6Z",fill:"currentColor"})));default:return t.createElement("div",null)}}function ni(e){var n,r,i,o,s,a,l;const u=void 0!==e.numberOfItems?Math.ceil(e.numberOfItems/e.pageSize):void 0,c=void 0!==u?u-1:0,h=void 0!==u,d=0===e.numberOfItems?0:e.page*e.pageSize+1,f=(v=e.canNextPage,p=e.numberOfItems,_=e.page,g=e.pageSize,v||!p?0===p?p:(_+1)*g:p);var v,p,_,g;const m=t=>{e.setPaginationIndex&&e.setPaginationIndex(t)};if(0===e.numberOfItems&&"always"!==e.showPagingButtons)return null;const b="".concat(d," to ").concat(f," ").concat(h?"of ".concat(null!==(n=e.numberOfItems)&&void 0!==n?n:(null!=u?u:1)*e.pageSize):"");return t.createElement("div",{"aria-label":null!==(r=e.labelPagination)&&void 0!==r?r:"Pagination",className:"pagination-bar"},t.createElement("button",{className:"btn pagination-button",disabled:0===e.page,...ri((()=>{e.gotoPage(0),m(0)})),"aria-label":null!==(i=e.labelFirstPage)&&void 0!==i?i:"Go to first page"},t.createElement(ti,{direction:"step-backward"})),t.createElement("button",{className:"btn pagination-button",disabled:!e.canPreviousPage,...ri((()=>{e.previousPage(),m(e.page-1)})),"aria-label":null!==(o=e.labelPreviousPage)&&void 0!==o?o:"Go to previous page"},t.createElement(ti,{direction:"backward"})),t.createElement("span",{className:"sr-only sr-only-focusable"},null!==(s=e.labelPagingStatus)&&void 0!==s?s:"Currently showing"," ",b),t.createElement("div",{"aria-hidden":!0,className:"paging-status"},b),t.createElement("button",{"aria-label":null!==(a=e.labelNextPage)&&void 0!==a?a:"Go to next page",className:"btn pagination-button",disabled:!e.canNextPage,...ri((()=>{e.nextPage(),m(e.page+1)}))},t.createElement(ti,{direction:"forward"})),h&&t.createElement("button",{"aria-label":null!==(l=e.labelLastPage)&&void 0!==l?l:"Go to last page",className:"btn pagination-button",disabled:e.page===c||0===e.numberOfItems,...ri((()=>{e.gotoPage(c),m(c)}))},t.createElement(ti,{direction:"step-forward"})))}function ri(e){return{onClick:e,onKeyDown:t=>{" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),t.stopPropagation(),e())}}}const ii=Symbol("DefaultKeyNavContextValue"),oi=t.createContext(ii);function si(e){let{focusController:n,children:r}=e;const i=t.useMemo((()=>({focusController:n})),[n]);return t.createElement(oi.Provider,{value:i},r)}var ai,li={exports:{}};
/*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  */ai=li,function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"===o||"number"===o)n.push(i);else if(Array.isArray(i)){if(i.length){var s=t.apply(null,i);s&&n.push(s)}}else if("object"===o){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){n.push(i.toString());continue}for(var a in i)e.call(i,a)&&i[a]&&n.push(a)}}}return n.join(" ")}ai.exports?(t.default=t,ai.exports=t):window.classNames=t}();var ui=li.exports;function ci(e){let{children:n,className:r,selectionType:i,lg:o,md:s,sm:a,...l}=e;const u="None"!==i;return t.createElement("div",{...l,className:ui("widget-gallery-items","widget-gallery-lg-".concat(o),"widget-gallery-md-".concat(s),"widget-gallery-sm-".concat(a),r),role:u?"listbox":"list","aria-multiselectable":u?"Multi"===i:void 0},n)}function hi(e){const n=t.useRef(null),r=t.useRef(e.focusTarget),{focusController:i}=function(){const e=t.useContext(oi);if(e===ii)throw new Error("useKeyNavContext: context provider is missing");return e}(),[o,s]=t.useMemo((()=>{const t=Rr(e.columnIndex,e.rowIndex);return[t===i.focusTarget,t]}),[e.columnIndex,e.rowIndex,i.focusTarget]),[a,l]=t.useState({canFocus:!1});return t.useEffect((()=>{const e=e=>l((t=>e.lastPos===s?{canFocus:!1}:e.targetPos===s?{canFocus:e.shouldFocus}:t));return i.addListener(e),()=>i.removeListener(e)}),[i,s]),t.useEffect((()=>{const{current:e}=r;if(a.canFocus){const t="function"==typeof e?e():n.current;null==t||t.focus()}}),[a]),{ref:n,tabIndex:o?0:-1,"data-position":s}}function di(e){const{eventsController:n,getPosition:r,helper:i,item:o,itemIndex:s,selectHelper:a,...l}=e,u=i.hasOnClick(o)||"None"!==a.selectionType,c=function(e,t){return"Single"===t.selectionType||"Multi"===t.selectionType?{role:"option","aria-selected":t.isSelected(e),tabIndex:0}:{role:"listitem","aria-selected":void 0,tabIndex:void 0}}(o,a),{columnIndex:h,rowIndex:d}=r(s),f=hi({columnIndex:null!=h?h:-1,rowIndex:d}),v=t.useMemo((()=>n.getProps(o)),[n,o]);return t.createElement("div",{...l,className:ui("widget-gallery-item",{"widget-gallery-clickable":u,"widget-gallery-selected":c["aria-selected"],"widget-gallery-preview":e.preview},i.itemClass(o)),...c,onClick:v.onClick,onFocus:v.onFocus,onKeyDown:v.onKeyDown,onKeyUp:v.onKeyUp,onMouseDown:v.onMouseDown,"data-position":f["data-position"],ref:f.ref,tabIndex:f.tabIndex},i.render(o))}function fi(e){var n,r;const[i,o]=t.useState(!1),s=null!==(r=(n=t.useRef()).current)&&void 0!==r?r:n.current=function(e){let{setIsIntersecting:t}=e;return new IntersectionObserver((e=>{let[n]=e;t(n.isIntersecting)}))}({setIsIntersecting:o});return t.useEffect((()=>(e.current&&s.observe(e.current),()=>{s.disconnect()})),[s,e]),i}function vi(e){let{children:n,className:r,hasMoreItems:i,isInfinite:o,setPage:s}=e;const[a,l,u]=function(e){const{setPage:n,hasMoreItems:r,isInfinite:i}=e,[o,s]=t.useState(0),a=t.useRef(null),l=fi(a),u=t.useCallback((e=>{Math.floor(e.target.scrollHeight-30-e.target.scrollTop)<=Math.floor(e.target.clientHeight)+2&&r&&n&&n((e=>e+1))}),[r,n]),c=t.useCallback((()=>{l&&i&&r&&o<=0&&a.current&&s(a.current.clientHeight-30)}),[i,r,o,l]);return t.useLayoutEffect((()=>{setTimeout((()=>c()),100)}),[c]),[u,o,a]}({hasMoreItems:i,isInfinite:o,setPage:s});return t.createElement("div",{className:ui("widget-gallery-content",{"infinite-loading":o},r),ref:u,onScroll:o?a:void 0,style:o&&l>0?{maxHeight:l}:void 0},n)}function pi(e){let{children:n,className:r,...i}=e;return t.createElement("div",{className:ui("widget-gallery-footer",r),...i},n)}function _i(e){const{children:n}=e;return n?t.createElement("section",{...e,className:"widget-gallery-header widget-gallery-filter"}):null}function gi(e){const{className:n,selectable:r,children:i,...o}=e;return t.createElement("div",{className:ui("widget-gallery",{"widget-gallery-selectable":r},n),...o},i)}function mi(e){return t.createElement("div",{className:"widget-gallery-top-bar"},e.children)}function bi(e){const n=e.paging?t.createElement("div",{className:"widget-gallery-pagination"},t.createElement(ni,{canNextPage:e.hasMoreItems,canPreviousPage:0!==e.page,gotoPage:t=>e.setPage&&e.setPage((()=>t)),nextPage:()=>e.setPage&&e.setPage((e=>e+1)),numberOfItems:e.numberOfItems,page:e.page,pageSize:e.pageSize,previousPage:()=>e.setPage&&e.setPage((e=>e-1))})):null,r=e.paging&&"above"===e.paginationPosition,i=e.paging&&"below"===e.paginationPosition;return t.createElement(gi,{className:e.className,style:e.style,selectable:!1,"data-focusindex":e.tabIndex||0},r&&t.createElement(mi,null,n),e.showHeader&&t.createElement(_i,{"aria-label":e.headerTitle},e.header),t.createElement(vi,{hasMoreItems:e.hasMoreItems,setPage:e.setPage,isInfinite:!e.paging},e.items.length>0&&t.createElement(ci,{lg:e.desktopItems,md:e.tabletItems,sm:e.phoneItems,selectionType:e.selectHelper.selectionType,"aria-label":e.ariaLabelListBox},t.createElement(si,{focusController:e.focusController},e.items.map(((n,r)=>t.createElement(di,{preview:e.preview,key:"item_".concat(n.id),helper:e.itemHelper,item:n,selectHelper:e.selectHelper,eventsController:e.itemEventsController,getPosition:e.getPosition,itemIndex:r})))))),(0===e.items.length||e.showEmptyStatePreview)&&e.emptyPlaceholderRenderer&&e.emptyPlaceholderRenderer((n=>t.createElement("section",{className:"widget-gallery-empty","aria-label":e.emptyMessageTitle},t.createElement("div",{className:"empty-placeholder"},n)))),i&&t.createElement(pi,null,n))}function yi(e){return e.reduce(((e,t)=>{var n,r,i,o,s,a;switch(t.eventName){case"onClick":e.onClick=null!==(n=e.onClick)&&void 0!==n?n:[],e.onClick.push(t);break;case"onDoubleClick":e.onDoubleClick=null!==(r=e.onDoubleClick)&&void 0!==r?r:[],e.onDoubleClick.push(t);break;case"onKeyDown":e.onKeyDown=null!==(i=e.onKeyDown)&&void 0!==i?i:[],e.onKeyDown.push(t);break;case"onKeyUp":e.onKeyUp=null!==(o=e.onKeyUp)&&void 0!==o?o:[],e.onKeyUp.push(t);break;case"onMouseDown":e.onMouseDown=null!==(s=e.onMouseDown)&&void 0!==s?s:[],e.onMouseDown.push(t);break;case"onFocus":e.onFocus=null!==(a=e.onFocus)&&void 0!==a?a:[],e.onFocus.push(t)}return e}),{})}function wi(e,t,n){const r=e();(!n.filter||n.filter(r,t))&&n.handler(r,t)}class Si{constructor(e){Pr(this,"entries",void 0),this.entries=e}getClickEntry(){const{onClick:e=[],onDoubleClick:t=[]}=yi(this.entries);let n=0;return{eventName:"onClick",handler:(r,i)=>{Date.now()-n>320?(e.forEach((e=>this.runEntry(e,r,i))),n=Date.now()):(t.forEach((e=>this.runEntry(e,r,i))),n=0)}}}runEntry(e,t,n){var r,i;(null===(r=null===(i=e.filter)||void 0===i?void 0:i.call(e,t,n))||void 0===r||r)&&e.handler(t,n)}}function Oi(e){return{eventName:"onKeyDown",filter:(e,t)=>!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement),handler:(t,n)=>{var r,i;for(const o of e)(null===(i=null===(r=o.filter)||void 0===r?void 0:r.call(o,t,n))||void 0===i||i)&&o.handler(t,n)}}}const Ei=e=>({eventName:"onClick",handler:(t,n)=>e({type:"Mouse",reactEvent:n})}),xi=e=>({eventName:"onKeyDown",handler:(t,n)=>e({type:"Keyboard",reactEvent:n})}),Ai=e=>({eventName:"onFocus",handler:(t,n)=>e({type:"Focus",reactEvent:n})});function Ti(){var e;null===(e=window.getSelection())||void 0===e||e.removeAllRanges()}const Pi=()=>{Pi.timeoutId&&clearTimeout(Pi.timeoutId),Pi.timeoutId=window.setTimeout((()=>{Ti(),document.body.style.userSelect="",Pi.timeoutId=void 0}),250)},Ci=e=>({eventName:"onClick",filter:e=>"None"!==e.selectionType,handler:(t,n)=>{let{item:r,selectionMode:i}=t,o=!1;o||(o="toggle"===i),o||(o=n.metaKey),o||(o=n.ctrlKey),e(r,n.shiftKey,o)}}),ki=e=>({eventName:"onKeyUp",filter:(e,t)=>"None"!==e.selectionType&&function(e){return"Space"===e.code&&e.shiftKey}(t),handler:t=>{let{item:n}=t;return e(n,!1,!0)}});function Ii(e,t,n,r){return[(i=Ti,{eventName:"onMouseDown",filter:e=>"None"!==e.selectionType,handler:i}),Ci(e),ki(e),Yr((()=>{document.body.style.userSelect="none",t("selectAll")}),(()=>{Pi()})),Oi(Zr(n,r))].flat();var i}const Ni=e=>({eventName:"onClick",filter:(e,t)=>"single"===e.clickTrigger&&!t.metaKey&&!t.ctrlKey,handler:t=>{let{item:n}=t;e(n)}}),Vi=e=>({eventName:"onDoubleClick",filter:(e,t)=>"double"===e.clickTrigger&&!t.metaKey&&!t.ctrlKey,handler:t=>{let{item:n}=t;e(n)}}),Mi=(e,t)=>"Space"===t.code?!t.shiftKey:"Enter"===t.code,ji=e=>{let t=!1;return[{eventName:"onKeyDown",filter:Mi,handler:()=>t=!0},{eventName:"onKeyUp",filter:(e,n)=>Mi(0,n)&&t,handler:n=>{let{item:r}=n;t=!1,e(r)}}]};class Di{constructor(e,t,n,r,i,o,s){this.contextFactory=e,this.selectFx=t,this.selectAllFx=n,this.executeActionFx=r,this.focusTargetFx=i,this.selectAdjacentFx=o,this.numberOfColumns=s}getProps(e){return function(e,t){const n=yi(t);return{onClick(t){var r;null===(r=n.onClick)||void 0===r||r.forEach((n=>wi(e,t,n)))},onDoubleClick(t){var r;null===(r=n.onDoubleClick)||void 0===r||r.forEach((n=>wi(e,t,n)))},onKeyUp(t){var r;null===(r=n.onKeyUp)||void 0===r||r.forEach((n=>wi(e,t,n)))},onKeyDown(t){var r;null===(r=n.onKeyDown)||void 0===r||r.forEach((n=>wi(e,t,n)))},onMouseDown(t){var r;null===(r=n.onMouseDown)||void 0===r||r.forEach((n=>wi(e,t,n)))},onFocus(t){var r;null===(r=n.onFocus)||void 0===r||r.forEach((n=>wi(e,t,n)))}}}((()=>this.contextFactory(e)),this.getEntries())}getEntries(){const e=[...Ii(this.selectFx,this.selectAllFx,this.selectAdjacentFx,this.numberOfColumns),...(n=this.executeActionFx,[Ni(n),Vi(n),(r=e=>{e.preventDefault(),e.stopPropagation()},{eventName:"onKeyDown",filter:(e,t)=>function(e){return"Space"===e.code&&e.target===e.currentTarget}(t),handler:(e,t)=>r(t)}),...ji(n)]),...(t=this.focusTargetFx,[Ei(t),Oi([xi(t)]),Ai(t)])];var t,n,r;const i=e.filter((e=>"onClick"===e.eventName||"onDoubleClick"===e.eventName)),o=e.filter((e=>"onClick"!==e.eventName&&"onDoubleClick"!==e.eventName));return[new Si(i).getClickEntry(),...o]}}function Ri(e){const n=function(e){return e<768?"phone":e>=768&&e<992?"tablet":"desktop"}(function(){const[e,n]=t.useState(window.innerWidth);return t.useEffect((()=>{const e=e=>n(e.target.innerWidth);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e}()),r=function(e,t){return e["".concat(t,"Items")]}(e,n),i=Math.ceil(e.totalItems/r);return{numberOfColumns:Math.min(r,e.totalItems),numberOfRows:i}}function Li(e){return t.createElement("div",{...e,...Ki,className:ui("widget-gallery-item-button",e.className),role:"button"})}const Ki=function(){let e=!1;return{onKeyDown:t=>{Bi(t)&&(Fi(t),Ui(t)&&(e=!0))},onKeyUp:t=>{Bi(t)&&Ui(t)&&e&&(Fi(t),t.currentTarget.dispatchEvent(new MouseEvent("click",{bubbles:!0})),e=!1)}}}();function Bi(e){return"Enter"===e.code||"Space"===e.code}function Ui(e){return e.currentTarget===e.target}function Fi(e){e.stopPropagation(),e.preventDefault()}class qi{constructor(e,t,n){this._classValue=e,this._contentValue=t,this._clickValue=n}itemClass(e){var t;return null===(t=this._classValue)||void 0===t?void 0:t.get(e).value}render(e){var n,r;return this.hasOnClick(e)?t.createElement(Li,null,null===(n=this._contentValue)||void 0===n?void 0:n.get(e)):null===(r=this._contentValue)||void 0===r?void 0:r.get(e)}hasOnClick(e){var t;return!!(null===(t=this._clickValue)||void 0===t?void 0:t.get(e))}}const zi=(e,t)=>Object.hasOwn(e,t);function Hi(e){return zi(e,"arg1")&&zi(e,"arg2")}function Gi(e){return"function"===e.type&&"and"===e.name}function Wi(e){return"function"===e.type&&"or"===e.name}function Ji(e){return Hi(e)&&"literal"===e.arg2.type&&"="===e.name&&"undefined"===e.arg2.valueType}function Xi(e){return Hi(e)&&"literal"===e.arg2.type&&"!="===e.name&&"undefined"===e.arg2.valueType}function Yi(e){return r.equals(r.literal(e),r.literal(e))}function $i(e){const[t,n]=[(i=e).flatMap(((e,t)=>void 0===e?[]:[t])),i.filter((e=>void 0!==e))];var i;const o=[e.length,t],s=Yi((a=o,JSON.stringify(a)));var a;const l=Yi("_");return r.and(s,l,...n)}function Zi(e){if(!Gi(e))return[];const[t]=e.args,n=function(e){return"="===e.name&&"literal"===e.arg1.type&&"literal"===e.arg2.type&&/string/i.test(e.arg1.valueType)&&/string/i.test(e.arg2.valueType)&&e.arg1.value===e.arg2.value}(t)?function(e){let t,n;try{[t,n]=JSON.parse(e)}catch{return}if("number"==typeof t&&Array.isArray(n)&&n.every((e=>"number"==typeof e)))return[t,n]}(t.arg1.value):void 0;if(!n)return[];const[r,i]=n,o=Array(r).fill(void 0);return e.args.slice(2).forEach(((e,t)=>{o[i[t]]=e})),o}function Qi(e,t,n){return Wi(e)?Qi(e.args[0],t,n):Gi(e)?eo(e,t,n):to(e,t,n)}function eo(e,t,n){const[r,i]=e.args,[o,s]=[no(r,n),no(i,n)];return o&&s?[t("between"),o,s]:null}function to(e,t,n){const r=no(e,n);return null===r?null:Ji(e)?[t("empty"),r]:Xi(e)?[t("notEmpty"),r]:[t(e.name),r]}function no(e,t){return Hi(e)?"literal"!==e.arg2.type?null:t(e.arg2):null}var ro,io;!function(e){e[e.EMISSINGSTORE=2]="EMISSINGSTORE",e[e.ENOCONTEXT=1]="ENOCONTEXT",e[e.ESTORETYPE=3]="ESTORETYPE",e[e.EKEYMISSING=7]="EKEYMISSING"}(ro||(ro={})),Object.freeze({code:ro.ENOCONTEXT,message:"The filter widget must be placed inside the column or header of the Data grid 2.0 or inside header of the Gallery widget."}),Object.freeze({code:ro.EMISSINGSTORE,message:"Unable to get filter store. Check parent widget configuration."}),Object.freeze({code:ro.EKEYMISSING,message:"The key for filter is missing."}),function(e){e.STRING="string",e.NUMBER="number",e.ENUMERATION="enum",e.DATE="date"}(io||(io={}));const oo="com.mendix.widgets.web.filterable.filterContext.v2";class so{constructor(e,t){Pr(this,"_value",void 0),Pr(this,"isValid",!0),Pr(this,"_formatter",void 0),Pr(this,"_lastSetTextValue",""),this._formatter=e,this._value=t,pn(this,{_value:Le,value:Fe,isValid:Le,_lastSetTextValue:Le,displayValue:Fe,_formatter:Le.ref})}updateProps(e){this._formatter=e}set value(e){this._value=e,this._lastSetTextValue="",this.isValid=!0}get value(){return this._value}get displayValue(){var e,t;return this.isValid?(null===(e=this._formatter)||void 0===e?void 0:e.format(this.value))||(null===(t=this.value)||void 0===t?void 0:t.toString())||"":this._lastSetTextValue}set displayValue(e){var t;this._lastSetTextValue=e;const n=null===(t=this._formatter)||void 0===t?void 0:t.parse(this._lastSetTextValue);this.isValid=n.valid,n.valid&&!this.equals(this._value,n.value)&&(this._value=n.value)}equals(e,t){throw new Error("equals not implemented")}}class ao extends so{constructor(){super(...arguments),Pr(this,"type","number")}equals(e,t){return Object.is(e,t)||!!(e&&t&&e.eq(t))}}class lo extends so{constructor(){super(...arguments),Pr(this,"type","date")}equals(e,t){return Object.is(e,t)||!(!e||!t||+e!=+t)}}class uo extends so{constructor(){super(...arguments),Pr(this,"type","string")}equals(e,t){return e===t}}class co{constructor(e,t,n,r){Pr(this,"_attributes",[]),Pr(this,"filterFunction",void 0),Pr(this,"arg1",void 0),Pr(this,"arg2",void 0),Pr(this,"isInitialized",!1),Pr(this,"defaultState",void 0),Pr(this,"UNSAFE_setDefaults",(e=>{this.defaultState=e,!1===this.isInitialized&&(this.setState(e),this.isInitialized=!0)})),Pr(this,"reset",(()=>{this.setState(this.defaultState)})),Pr(this,"clear",(()=>{this.setState([this.filterFunction])})),Pr(this,"setFilterFn",(e=>{this.filterFunction=e})),this._attributes=r,this.defaultState=[n],this.filterFunction=n,this.arg1=e,this.arg2=t,pn(this,{_attributes:Le.ref,filterFunction:Le,condition:Fe,setState:Lt,UNSAFE_setDefaults:Lt,setFilterFn:Lt})}setState(e){[this.filterFunction,this.arg1.value,this.arg2.value]=e}get condition(){const e=this._attributes.map((e=>function(e,t,n,i){if(!e||!e.filterable||"empty"!==i&&"notEmpty"!==i&&!t||"between"===i&&(!t||!n))return;if("between"===i)return r.and(r.greaterThan(r.attribute(e.id),r.literal(t)),r.lessThan(r.attribute(e.id),r.literal(n)));return{contains:r.contains,startsWith:r.startsWith,endsWith:r.endsWith,greater:r.greaterThan,greaterEqual:r.greaterThanOrEqual,equal:r.equals,notEqual:r.notEqual,smaller:r.lessThan,smallerEqual:r.lessThanOrEqual,empty:r.equals,notEmpty:r.notEqual}[i](r.attribute(e.id),r.literal("empty"===i||"notEmpty"===i?void 0:t))}(e,this.arg1.value,this.arg2.value,this.filterFunction))).filter((e=>void 0!==e));return(null==e?void 0:e.length)>1?r.or(...e):null==e?void 0:e[0]}unpackJsonData(e){if(Array.isArray(e)&&3===e.length)return e}}class ho extends co{constructor(e,t){const{formatter:n}=e[0];super(new lo(n),new lo(n),"equal",e),Pr(this,"storeType","input"),Pr(this,"type","date"),Pr(this,"rangeMarkerTag","__RANGE_MARKER__"),Pr(this,"computedState",void 0),Pr(this,"mapFn",(e=>{switch(e){case"day:=":default:return"equal";case"day:!=":return"notEqual";case"day:<":return"smaller";case"day:<=":return"smallerEqual";case"day:>":return"greater";case"day:>=":return"greaterEqual"}})),pn(this,{updateProps:Lt,computedState:Le.shallow,fromViewState:Lt,fromJSON:Lt}),t&&this.fromViewState(t),this.computedState=[this.filterFunction,this.arg1.value,this.arg2.value],this.setupComputeValues()}get condition(){const e=this._attributes.flatMap((e=>this.getCondition(e,...this.computedState)));switch(e.length){case 0:return;case 1:return e[0];default:return r.or(...e)}}setup(){const e=[];return e.push(this.setupComputeValues()),()=>e.forEach((e=>e()))}updateProps(e){if(!Z.shallow(this._attributes,e)){var t;this._attributes=e;const n=null===(t=e.at(0))||void 0===t?void 0:t.formatter;this.arg1.updateProps(n),this.arg2.updateProps(n)}}setupComputeValues(){return qt((()=>[this.filterFunction,this.arg1.value,this.arg2.value]),(e=>{const[t,n,r]=e;"between"===t&&n instanceof Date&&void 0===r||(this.computedState=e)}),{equals:Z.shallow})}isRange(e){const[t,n]=Array.isArray(e)?e:[];return t instanceof Date&&n instanceof Date}getCondition(e,t,n,r){if(!e.filterable)return[];if("between"===t){const t=[n,r];return this.isRange(t)?this.getRangeCondition(e,t):[]}return this.getAttrCondition(e,t,n)}getAttrCondition(e,t,n){const[i,o]=[r.attribute(e.id),r.literal(n)];if("empty"===t)return[r.equals(i,r.literal(void 0))];if("notEmpty"===t)return[r.notEqual(i,r.literal(void 0))];if(void 0===n)return[];switch(t){case"greater":return[r.dayGreaterThan(i,o)];case"greaterEqual":return[r.dayGreaterThanOrEqual(i,o)];case"equal":return[r.dayEquals(i,o)];case"notEqual":return[r.dayNotEqual(i,o)];case"smaller":return[r.dayLessThan(i,o)];case"smallerEqual":return[r.dayLessThanOrEqual(i,o)];default:return[]}}getRangeCondition(e,t){let[n,i]=t;[n,i]=[_o(n),vo(_o(i))];const o=r.attribute(e.id);return[r.and(r.dayGreaterThanOrEqual(o,r.literal(n)),r.dayLessThan(o,r.literal(i)),this.getRangeCondMarker())]}rangeExpToState(e){const t=eo(e,(()=>"between"),(e=>"DateTime"===e.valueType?e.value:void 0));if(null===t)return null;const[n,r,i]=t;return[n,r,i?po(i):void 0]}getRangeCondMarker(){return r.equals(r.literal(this.rangeMarkerTag),r.literal(this.rangeMarkerTag))}isRangeMarker(e){return!!e&&("function"===e.type&&"="===e.name&&"literal"===e.arg1.type&&"literal"===e.arg2.type&&e.arg1.value===this.rangeMarkerTag&&e.arg2.value===this.rangeMarkerTag)}toJSON(){return[this.filterFunction,this.arg1.value?this.arg1.value.toJSON():null,this.arg2.value?this.arg2.value.toJSON():null]}fromJSON(e){const t=this.unpackJsonData(e);if(!t)return;const[n,r,i]=t;this.filterFunction=n,this.arg1.value=fo(r),this.arg2.value=fo(i),this.isInitialized=!0}fromViewState(e){const t=e=>"DateTime"===e.valueType?e.value:void 0,n=(e=>(Wi(e)&&(e=e.args[0]),Ji(e)?["empty",void 0,void 0]:Xi(e)?["notEmpty",void 0,void 0]:Gi(e)&&this.isRangeMarker(e.args.at(2))?this.rangeExpToState(e):to(e,this.mapFn,t)))(e);n&&(this.setState(n),this.isInitialized=!0)}}function fo(e){if(null===e)return;const t=new Date(e);return"Invalid Date"===t.toString()?void 0:t}function vo(e){return(e=new Date(e.getTime())).setUTCHours(24),e}function po(e){return(e=new Date(e.getTime())).setUTCHours(-24),e}function _o(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0))}function go(e){switch(e){case"=":default:return"equal";case"!=":return"notEqual";case">":return"greater";case">=":return"greaterEqual";case"<":return"smaller";case"<=":return"smallerEqual";case"between":case"empty":case"notEmpty":return e}}class mo extends co{constructor(e,t){let{formatter:n}=e[0];n=function(e){var t;if(!1===(null===(t=e.parse("none"))||void 0===t?void 0:t.valid))return e;return{format:e=>e?e.toString():e,parse:e=>{try{return{valid:!0,value:new i.Big(e)}}catch{return""===e?{valid:!0,value:void 0}:{valid:!1}}}}}(n),super(new ao(n),new ao(n),"equal",e),Pr(this,"storeType","input"),Pr(this,"type","number"),pn(this,{updateProps:Lt,fromJSON:Lt,fromViewState:Lt}),t&&this.fromViewState(t)}updateProps(e){Z.shallow(this._attributes,e)||(this._attributes=e)}toJSON(){return[this.filterFunction,this.arg1.value?this.arg1.value.toJSON():null,this.arg2.value?this.arg2.value.toJSON():null]}fromJSON(e){const t=this.unpackJsonData(e);if(!t)return;const[n,r,o]=t;this.filterFunction=n;try{this.arg1.value=new i.Big(null!=r?r:"")}catch{this.arg1.value=void 0}try{this.arg2.value=new i.Big(null!=o?o:"")}catch{this.arg2.value=void 0}this.isInitialized=!0}fromViewState(e){const t=Qi(e,(e=>go(e)),(e=>"Numeric"===e.valueType?e.value:void 0));t&&(this.setState(t),this.isInitialized=!0)}}class bo{constructor(e,t){Pr(this,"storeType","optionlist"),Pr(this,"type","select"),Pr(this,"isLoading",!1),Pr(this,"hasMore",!1),Pr(this,"hasSearch",!1),Pr(this,"defaultValue",void 0),Pr(this,"isInitialized",!1),Pr(this,"_selected",new Set),Pr(this,"_attributes",[]),Pr(this,"_customOptions",[]),Pr(this,"UNSAFE_setDefaults",(e=>{var t;null!==(t=this.defaultValue)&&void 0!==t||(this.defaultValue=e),!1===this.isInitialized&&void 0!==this.defaultValue&&(this.replace(this.defaultValue),this.isInitialized=!0)})),Pr(this,"reset",(()=>{this.replace(void 0!==this.defaultValue?this.defaultValue:[])})),Pr(this,"clear",(()=>{this.replace([])})),this._attributes=e,pn(this,{_attributes:Le.ref,_selected:Le,_customOptions:Le.ref,options:Fe,universe:Fe,replace:Lt,toggle:Lt,updateProps:Lt,fromJSON:Lt,fromViewState:Lt,setCustomOptions:Lt}),t&&this.fromViewState(t)}get options(){if(this._customOptions.length>0)return this._customOptions.map((e=>({...e,selected:this._selected.has(e.value)})));const e=this._attributes.flatMap((e=>{var t;return Array.from(null!==(t=e.universe)&&void 0!==t?t:[],(t=>{const n="".concat(t);return{caption:e.formatter.format(t),value:n,selected:this._selected.has(n)}}))}));return e}get universe(){return new Set(this._attributes.flatMap((e=>{var t;return Array.from(null!==(t=e.universe)&&void 0!==t?t:[],(e=>"".concat(e)))})))}get condition(){const e=this._attributes.flatMap((e=>{const t=function(e,t){if(!e||!e.filterable||0===t.size)return;const{id:n,type:i}=e,o=r.attribute(n),s=[...t].filter((t=>{var n;return null===(n=e.universe)||void 0===n?void 0:n.includes(yo(e.type,t))})).map((e=>r.equals(o,r.literal(yo(i,e)))));if(s.length>1)return r.or(...s);const[a]=s;return a}(e,this._selected);return t?[t]:[]}));return e.length>1?r.or(...e):e[0]}updateProps(e){Z.shallow(this._attributes,e)||(this._attributes=e)}replace(e){const t=new Set(e);Z.structural(this._selected,t)||(this._selected=t)}toggle(e){!1===this._selected.delete(e)&&this._selected.add(e)}checkAttrs(){return this._attributes.every((e=>/Enum|Boolean/.test(e.type)))?null:new TypeError("StaticSelectFilterStore: invalid attribute found. Check widget configuration.")}isValidValue(e){return this.universe.has(e)}loadMore(){console.warn("StaticSelectFilterStore: calling loadMore has no effect.")}setSearch(){console.warn("StaticSelectFilterStore: calling setSearch has no effect.")}toJSON(){return[...this._selected]}fromJSON(e){Array.isArray(e)&&e.every((e=>"string"==typeof e))&&this.replace(e),this.isInitialized=!0}fromViewState(e){const t=function(e,t){const n=(e,r)=>{if("or"===r.name)return r.args.reduce(n,e);if("="===r.name||"contains"===r.name){const n=no(r,t);null!=n&&e.push(n)}return e};return[e].reduce(n,[])}(e,(e=>"string"===e.valueType?e.value:"boolean"===e.valueType?e.value?"true":"false":void 0));t.length>0&&(this.replace(t),this.isInitialized=!0)}setCustomOptions(e){this._customOptions=e}}function yo(e,t){return"Boolean"===e?"true"!==t&&"false"!==t?t:"true"===t:t}class wo extends co{constructor(e,t){const{formatter:n}=e[0];super(new uo(n),new uo(n),"equal",e),Pr(this,"storeType","input"),Pr(this,"type","string"),pn(this,{updateProps:Lt,fromJSON:Lt,fromViewState:Lt}),t&&this.fromViewState(t)}updateProps(e){var t;Z.shallow(this._attributes,e)||(this._attributes=e);const n=null===(t=e.at(0))||void 0===t?void 0:t.formatter;this.arg1.updateProps(n),this.arg2.updateProps(n)}toJSON(){var e,t;return[this.filterFunction,null!==(e=this.arg1.value)&&void 0!==e?e:null,null!==(t=this.arg2.value)&&void 0!==t?t:null]}fromJSON(e){const t=this.unpackJsonData(e);if(!t)return;const[n,r,i]=t;this.filterFunction=n,this.arg1.value=r||void 0,this.arg2.value=i||void 0,this.isInitialized=!0}fromViewState(e){const t=Qi(e,(e=>"contains"===e?"contains":"starts-with"===e?"startsWith":"ends-with"===e?"endsWith":go(e)),(e=>"string"===e.valueType?e.value:void 0));t&&(this.setState(t),this.isInitialized=!0)}}class So{constructor(e,t){Pr(this,"type","legacy"),Pr(this,"_attrs",void 0),Pr(this,"dispose",void 0),Pr(this,"filterMap",void 0),Pr(this,"filterList",void 0),Pr(this,"get",(e=>this.filterMap[e])),this._attrs=e;const n=this.filterMap=function(e,t){const[n=null,r=null,i=null,o=null]=null!=t?t:[],[s,a,l,u]=Oo(e);return{[io.STRING]:s.length>0?new wo(s,n):null,[io.NUMBER]:a.length>0?new mo(a,r):null,[io.DATE]:l.length>0?new ho(l,i):null,[io.ENUMERATION]:u.length>0?new bo(u,o):null}}(e,t);this.filterList=[n[io.STRING],n[io.NUMBER],n[io.DATE],n[io.ENUMERATION]],pn(this,{_attrs:Le.ref,conditions:Fe,settings:Fe,updateProps:Lt})}get conditions(){return this.filterList.map((e=>e?e.condition:void 0))}get settings(){return new Map}set settings(e){}updateProps(e){this._attrs=e}updateFilters(e){const[t,n,r,i]=Oo(e),[o,s,a,l]=this.filterList;null==o||o.updateProps(t),null==s||s.updateProps(n),null==a||a.updateProps(r),null==l||l.updateProps(i)}setup(){const e=[];return this.filterList.forEach((t=>{t&&"setup"in t&&e.push(t.setup())})),e.push(qt((()=>this._attrs),(e=>this.updateFilters(e)),{equals:Z.shallow})),this.dispose=()=>e.forEach((e=>e()))}}function Oo(e){return[e.filter(Ao),e.filter(xo),e.filter(Eo),e.filter((e=>"Boolean"===e.type||function(e){return"Enum"===e.type}(e)))]}function Eo(e){return"DateTime"===e.type}function xo(e){return"Long"===e.type||"Decimal"===e.type||"Integer"===e.type||"AutoNumber"===e.type}function Ao(e){return"HashString"===e.type||"String"===e.type}class To{constructor(e,t,n){var r;Pr(this,"provider",void 0),Pr(this,"context",void 0),this.provider=this.createProvider(e,n),this.context={version:2,parentChannelName:null!==(r=t.filtersChannelName)&&void 0!==r?r:"",provider:this.provider},pn(this,{conditions:Fe,settings:Fe})}get conditions(){return this.provider.hasError?[]:this.provider.value.conditions}get settings(){return this.provider.hasError?new Map:this.provider.value.settings}set settings(e){this.provider.hasError||(this.provider.value.settings=e)}createProvider(e,t){return function(e){return{hasError:!1,value:e}}(new So(e.filterList.map((e=>e.filter)),t))}setup(){if(!this.provider.hasError)return this.provider.value.setup()}updateProps(){}}function Po(){const e="com.mendix.widgets.web.UUID";return window[e]||(window[e]=1),window[e]++}function Co(e){return{hasError:!1,value:e}}class ko{constructor(e,t){Pr(this,"_direction",void 0),Pr(this,"_selected",void 0),Pr(this,"options",void 0),Pr(this,"select",(e=>{this._selected=e})),Pr(this,"toggleDirection",(()=>{this._direction="asc"===this._direction?"desc":"asc"})),this.options=e,[[this._selected,this._direction]=[null,"asc"]]=t,pn(this,{options:Le.ref,_selected:Le,_direction:Le,value:Fe,sortOrder:Fe,direction:Fe,select:Lt,toggleDirection:Lt})}get value(){return this._selected}get direction(){return this._direction}get sortOrder(){return this._selected?[[this._selected,this._direction]]:[]}}class Io{constructor(e){Pr(this,"store",void 0),Pr(this,"context",void 0);const t=e.sortList.map((e=>{var t;return{value:e.attribute.id,caption:"".concat(null===(t=e.caption)||void 0===t?void 0:t.value)}}));this.store=new ko(t,e.datasource.sortOrder),this.context={version:1,store:Co(this.store)},pn(this,{sortOrder:Fe})}get sortOrder(){return this.store.sortOrder}}class No{constructor(e){this.setInitParams(e),this.staticInfo={name:e.name,filtersChannelName:"datagrid/".concat(Po())};const t=this.getDsViewState(e);this.headerFiltersStore=new To(e,this.staticInfo,t),this.sortProvider=new Io(e)}get conditions(){return $i(this.headerFiltersStore.conditions)}get sortOrder(){return this.sortProvider.sortOrder}setup(){return this.headerFiltersStore.setup()}updateProps(e){}setInitParams(e){"buttons"===e.pagination&&e.datasource.requestTotalCount(!0),e.datasource.setLimit(e.pageSize)}getDsViewState(e){let{datasource:t}=e;return t.filter?Zi(t.filter):[]}}const Vo="com.mendix.widgets.web.sortable.sortContext";const Mo=(void 0===window[Qr]&&(window[Qr]=t.createContext(void 0)),window[Qr]),jo=null!==(Ro=(Do=window)[oo])&&void 0!==Ro?Ro:Do[oo]=t.createContext(null);var Do,Ro;const Lo=null!==(Bo=(Ko=window)[Vo])&&void 0!==Bo?Bo:Ko[Vo]=t.createContext(null);var Ko,Bo;function Uo(e){return t.createElement(jo.Provider,{value:e.filtersStore.context},e.children)}function Fo(e){const n=function(e){const n=t.useCallback((()=>{"Multi"===(null==e?void 0:e.type)&&("all"===e.selectionStatus?e.selectNone():e.selectAll())}),[e]),r="Multi"===(null==e?void 0:e.type)?e.selectionStatus:void 0;return t.useMemo((()=>{if(void 0!==r)return{status:r,toggle:n}}),[r,n])}(e.selectionHelper);return t.createElement(Mo.Provider,{value:n},e.children)}function qo(e){return t.createElement(Uo,{filtersStore:e.filtersStore},t.createElement(Lo.Provider,{value:e.sortProvider.context},t.createElement(Fo,{selectionHelper:e.selectionHelper},e.children)))}function zo(e){var n,r,i,o,s;const a="virtualScrolling"===e.pagination,l=a?e.datasource.limit/e.pageSize:e.datasource.offset/e.pageSize,u=t.useCallback((t=>{const n=t(l);a?e.datasource.setLimit(n*e.pageSize):e.datasource.setOffset(n*e.pageSize)}),[e.datasource,e.pageSize,a,l]),c=Wr(e.itemSelection,e.datasource,e.onSelectionChange),h=function(e,n){return t.useMemo((()=>new ei(e,n)),[n])}(e.itemSelection,c),d=null!==(n=e.datasource.items)&&void 0!==n?n:[],f={desktopItems:e.desktopItems,phoneItems:e.phoneItems,tabletItems:e.tabletItems,totalItems:d.length},{numberOfColumns:v,numberOfRows:p}=Ri(f),_=t.useCallback((e=>Jr(v,d.length,e)),[v,d.length]),g=function(e){let{rows:n,columns:r,pageSize:i}=e;const o=t.useRef(null);return t.useMemo((()=>{const e=new Br(n,r,i);return null===o.current?o.current=new Kr(new qr,e):o.current.updateGridLayout(e),o.current}),[n,r,i])}({rows:p,columns:v,pageSize:e.pageSize}),m=function(e){const n=t.useMemo((()=>new Dr(e.onClickTrigger,e.onClick)),[]);return t.useEffect((()=>{n.update(e.onClick)})),n}({onClick:e.onClick,onClickTrigger:e.onClickTrigger}),b=function(e,n,r,i,o){return t.useMemo((()=>new Di((t=>({item:t,selectionType:e.selectionType,selectionMode:o,clickTrigger:n.clickTrigger})),e.onSelect,e.onSelectAll,n.onExecuteAction,r.dispatch,e.onSelectAdjacent,i)),[e,r,i])}(h,m,g,v,e.itemSelectionMode),y=e.filterList.length>0||e.sortList.length>0||"Multi"===(null==c?void 0:c.type),w=(S={classValue:e.itemClass,contentValue:e.content,clickValue:e.onClick},t.useMemo((()=>new qi(S.classValue,S.contentValue,S.clickValue)),[S.classValue,S.contentValue,S.clickValue]));var S,O,E;return O=e.rootStore.staticInfo.name,E=e.rootStore.staticInfo.filtersChannelName,Mr(t.useRef({inputChannel:O,event:Tr.reset.filters,onEvent:(e,t)=>{e(E,Tr.reset.value,...t)}}).current),t.createElement(bi,{className:e.class,desktopItems:e.desktopItems,emptyPlaceholderRenderer:t.useCallback((n=>"custom"===e.showEmptyPlaceholder?n(e.emptyPlaceholder):t.createElement("div",null)),[e.emptyPlaceholder,e.showEmptyPlaceholder]),emptyMessageTitle:null===(r=e.emptyMessageTitle)||void 0===r?void 0:r.value,header:y&&t.createElement(qo,{filtersStore:e.rootStore.headerFiltersStore,selectionHelper:c,sortProvider:e.rootStore.sortProvider},e.filtersPlaceholder),headerTitle:null===(i=e.filterSectionTitle)||void 0===i?void 0:i.value,ariaLabelListBox:null===(o=e.ariaLabelListBox)||void 0===o?void 0:o.value,showHeader:y,hasMoreItems:null!==(s=e.datasource.hasMoreItems)&&void 0!==s&&s,items:d,itemHelper:w,numberOfItems:e.datasource.totalCount,page:l,pageSize:e.pageSize,paging:"buttons"===e.pagination,paginationPosition:e.pagingPosition,phoneItems:e.phoneItems,setPage:u,style:e.style,tabletItems:e.tabletItems,tabIndex:e.tabIndex,selectHelper:h,itemEventsController:b,focusController:g,getPosition:_})}const Ho=function(e,n){var r;if(xr&&e.$$typeof===xr)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var i=null!==(r=null==n?void 0:n.forwardRef)&&void 0!==r&&r,o=e,a=e.displayName||e.name;if(Er&&e.$$typeof===Er&&(i=!0,"function"!=typeof(o=e.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var l,u,c=function(e,t){return function(e,t){void 0===t&&(t="observed");var n=s.default.useRef(null);if(!n.current){var r={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(e){return yr.unregister(r),r.onStoreChange=e,r.reaction||(wr(r),r.stateVersion=Symbol()),function(){var e;r.onStoreChange=null,null===(e=r.reaction)||void 0===e||e.dispose(),r.reaction=null}},getSnapshot:function(){return r.stateVersion}};n.current=r}var i,o,a=n.current;if(a.reaction||(wr(a),yr.register(n,a,a)),s.default.useDebugValue(a.reaction,_r),s.default.useSyncExternalStore(a.subscribe,a.getSnapshot,a.getSnapshot),a.reaction.track((function(){try{i=e()}catch(e){o=e}})),o)throw o;return i}((function(){return o(e,t)}),a)};return c.displayName=e.displayName,Or&&Object.defineProperty(c,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(c.contextTypes=e.contextTypes),i&&(c=t.forwardRef(c)),c=t.memo(c),l=e,u=c,Object.keys(l).forEach((function(e){Ar[e]||Object.defineProperty(u,e,Object.getOwnPropertyDescriptor(l,e))})),c}((function(e){const n=function(e){const n=t.useRef(e.datasource),[r]=t.useState((()=>new No(e)));return t.useEffect((()=>r.setup()),[r]),t.useEffect((()=>{r.updateProps(e),n.current=e.datasource})),t.useEffect((()=>{const e=[];return e.push(qt((()=>r.sortOrder),(e=>{n.current.setSortOrder(e)}))),e.push(qt((()=>r.conditions),(e=>{n.current.setFilter(e)}),{fireImmediately:!0})),()=>{e.forEach((e=>e()))}}),[r]),r}(e);return t.createElement(zo,{...e,rootStore:n})}));e.Gallery=function(e){return t.createElement(Ho,{...e})},Object.defineProperty(e,"__esModule",{value:!0})}));
